import{u as ir,a as ar}from"./use-dark.55495a85.js";import{m as pe,c as N,h as Z,g as me,v as gt,S as ia,U as aa,r as X,Z as sn,_ as _t,Y as oa,$ as ua,a0 as li,a1 as se,a2 as sa,a3 as la,a4 as Oe,a5 as hn,a6 as qt,a7 as vn,a8 as zt,a9 as Qe,l as Ae,aa as Br,w as le,ab as ca,o as ci,n as jt,ac as he,ad as fa,ae as fi,af as di,ag as Mt,a as da,ah as hi,ai as ha,aj as va,ak as pa,al as Wt,am as vi,C as pn,M as Kr,G as ma,H as ya,an as mn,D as ga,J as _a,N as ba}from"./index.431dcb33.js";import{g as wa,a as Ea,h as Aa,b as Ta,c as pi}from"./scroll.c8893e35.js";import{r as Nr,a as xa,b as mi}from"./uid.3d1f5a39.js";import{I as Ca}from"./iconify.4d43847a.js";const Ia={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},yn={xs:2,sm:4,md:8,lg:16,xl:24};var ku=pe({name:"QSeparator",props:{...ir,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=me(),n=ar(e,t.proxy.$q),r=N(()=>e.vertical===!0?"vertical":"horizontal"),i=N(()=>` q-separator--${r.value}`),a=N(()=>e.inset!==!1?`${i.value}-${Ia[e.inset]}`:""),o=N(()=>`q-separator${i.value}${a.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(n.value===!0?" q-separator--dark":"")),u=N(()=>{const s={};if(e.size!==void 0&&(s[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const l=e.spaced===!0?`${yn.md}px`:e.spaced in yn?`${yn[e.spaced]}px`:e.spaced,c=e.vertical===!0?["Left","Right"]:["Top","Bottom"];s[`margin${c[0]}`]=s[`margin${c[1]}`]=l}return s});return()=>Z("hr",{class:o.value,style:u.value,"aria-orientation":r.value})}}),Ru=pe({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=N(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>Z("div",{class:n.value},gt(t.default))}}),Mu=pe({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=N(()=>parseInt(e.lines,10)),r=N(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),i=N(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>Z("div",{style:i.value,class:r.value},gt(t.default))}}),Bu=pe({name:"QItem",props:{...ir,...ia,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=me(),i=ar(e,r),{hasLink:a,linkAttrs:o,linkClass:u,linkTag:s,navigateOnClick:l}=aa(),c=X(null),f=X(null),d=N(()=>e.clickable===!0||a.value===!0||e.tag==="label"),v=N(()=>e.disable!==!0&&d.value===!0),h=N(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(a.value===!0&&e.active===null?u.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(v.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),p=N(()=>{if(e.insetLevel===void 0)return null;const y=r.lang.rtl===!0?"Right":"Left";return{["padding"+y]:16+e.insetLevel*56+"px"}});function g(y){v.value===!0&&(f.value!==null&&(y.qKeyEvent!==!0&&document.activeElement===c.value?f.value.focus():document.activeElement===f.value&&c.value.focus()),l(y))}function w(y){if(v.value===!0&&sn(y,[13,32])===!0){_t(y),y.qKeyEvent=!0;const b=new MouseEvent("click",y);b.qKeyEvent=!0,c.value.dispatchEvent(b)}n("keyup",y)}function _(){const y=oa(t.default,[]);return v.value===!0&&y.unshift(Z("div",{class:"q-focus-helper",tabindex:-1,ref:f})),y}return()=>{const y={ref:c,class:h.value,style:p.value,role:"listitem",onClick:g,onKeyup:w};return v.value===!0?(y.tabindex=e.tabindex||"0",Object.assign(y,o.value)):d.value===!0&&(y["aria-disabled"]="true"),Z(s.value,y,_())}}});const Sa=Z("div",{class:"q-space"});var Ku=pe({name:"QSpace",setup(){return()=>Sa}});const or={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Oa=Object.keys(or);or.all=!0;function Fr(e){const t={};for(const n of Oa)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?or:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const Da=["INPUT","TEXTAREA"];function Lr(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&Da.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Vt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),ua.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function gn(e,t,n){const r=zt(e);let i,a=r.left-t.event.x,o=r.top-t.event.y,u=Math.abs(a),s=Math.abs(o);const l=t.direction;l.horizontal===!0&&l.vertical!==!0?i=a<0?"left":"right":l.horizontal!==!0&&l.vertical===!0?i=o<0?"up":"down":l.up===!0&&o<0?(i="up",u>s&&(l.left===!0&&a<0?i="left":l.right===!0&&a>0&&(i="right"))):l.down===!0&&o>0?(i="down",u>s&&(l.left===!0&&a<0?i="left":l.right===!0&&a>0&&(i="right"))):l.left===!0&&a<0?(i="left",u<s&&(l.up===!0&&o<0?i="up":l.down===!0&&o>0&&(i="down"))):l.right===!0&&a>0&&(i="right",u<s&&(l.up===!0&&o<0?i="up":l.down===!0&&o>0&&(i="down")));let c=!1;if(i===void 0&&n===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};i=t.event.lastDir,c=!0,i==="left"||i==="right"?(r.left-=a,u=0,a=0):(r.top-=o,s=0,o=0)}return{synthetic:c,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:r,direction:i,isFirst:t.event.isFirst,isFinal:n===!0,duration:Date.now()-t.event.time,distance:{x:u,y:s},offset:{x:a,y:o},delta:{x:r.left-t.event.lastX,y:r.top-t.event.lastY}}}}let Pa=0;var Nu=li({name:"touch-pan",beforeMount(e,{value:t,modifiers:n}){if(n.mouse!==!0&&se.has.touch!==!0)return;function r(a,o){n.mouse===!0&&o===!0?_t(a):(n.stop===!0&&vn(a),n.prevent===!0&&qt(a))}const i={uid:"qvtp_"+Pa++,handler:t,modifiers:n,direction:Fr(n),noop:sa,mouseStart(a){Lr(a,i)&&la(a)&&(Oe(i,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),i.start(a,!0))},touchStart(a){if(Lr(a,i)){const o=a.target;Oe(i,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","passiveCapture"],[o,"touchend","end","passiveCapture"]]),i.start(a)}},start(a,o){if(se.is.firefox===!0&&hn(e,!0),i.lastEvt=a,o===!0||n.stop===!0){if(i.direction.all!==!0&&(o!==!0||i.modifiers.mouseAllDir!==!0&&i.modifiers.mousealldir!==!0)){const l=a.type.indexOf("mouse")!==-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&qt(l),a.cancelBubble===!0&&vn(l),Object.assign(l,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[i.uid]:a.qClonedBy.concat(i.uid)}),i.initialEvent={target:a.target,event:l}}vn(a)}const{left:u,top:s}=zt(a);i.event={x:u,y:s,time:Date.now(),mouse:o===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:u,lastY:s}},move(a){if(i.event===void 0)return;const o=zt(a),u=o.left-i.event.x,s=o.top-i.event.y;if(u===0&&s===0)return;i.lastEvt=a;const l=i.event.mouse===!0,c=()=>{r(a,l);let v;n.preserveCursor!==!0&&n.preservecursor!==!0&&(v=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),l===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Vt(),i.styleCleanup=h=>{if(i.styleCleanup=void 0,v!==void 0&&(document.documentElement.style.cursor=v),document.body.classList.remove("non-selectable"),l===!0){const p=()=>{document.body.classList.remove("no-pointer-events--children")};h!==void 0?setTimeout(()=>{p(),h()},50):p()}else h!==void 0&&h()}};if(i.event.detected===!0){i.event.isFirst!==!0&&r(a,i.event.mouse);const{payload:v,synthetic:h}=gn(a,i,!1);v!==void 0&&(i.handler(v)===!1?i.end(a):(i.styleCleanup===void 0&&i.event.isFirst===!0&&c(),i.event.lastX=v.position.left,i.event.lastY=v.position.top,i.event.lastDir=h===!0?void 0:v.direction,i.event.isFirst=!1));return}if(i.direction.all===!0||l===!0&&(i.modifiers.mouseAllDir===!0||i.modifiers.mousealldir===!0)){c(),i.event.detected=!0,i.move(a);return}const f=Math.abs(u),d=Math.abs(s);f!==d&&(i.direction.horizontal===!0&&f>d||i.direction.vertical===!0&&f<d||i.direction.up===!0&&f<d&&s<0||i.direction.down===!0&&f<d&&s>0||i.direction.left===!0&&f>d&&u<0||i.direction.right===!0&&f>d&&u>0?(i.event.detected=!0,i.move(a)):i.end(a,!0))},end(a,o){if(i.event!==void 0){if(Qe(i,"temp"),se.is.firefox===!0&&hn(e,!1),o===!0)i.styleCleanup!==void 0&&i.styleCleanup(),i.event.detected!==!0&&i.initialEvent!==void 0&&i.initialEvent.target.dispatchEvent(i.initialEvent.event);else if(i.event.detected===!0){i.event.isFirst===!0&&i.handler(gn(a===void 0?i.lastEvt:a,i).payload);const{payload:u}=gn(a===void 0?i.lastEvt:a,i,!0),s=()=>{i.handler(u)};i.styleCleanup!==void 0?i.styleCleanup(s):s()}i.event=void 0,i.initialEvent=void 0,i.lastEvt=void 0}}};if(e.__qtouchpan=i,n.mouse===!0){const a=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";Oe(i,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}se.has.touch===!0&&Oe(i,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchpan;n!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&n.end(),n.handler=t.value),n.direction=Fr(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),Qe(t,"main"),Qe(t,"temp"),se.is.firefox===!0&&hn(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});function Fu(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function Lu(e,t,n){if(n<=t)return t;const r=n-t+1;let i=t+(e-t)%r;return i<t&&(i=r+i),i===0?0:i}function Hu(e,t=2,n="0"){if(e==null)return e;const r=""+e;return r.length>=t?r:new Array(t-r.length+1).join(n)+r}function ka(e,t,n){let r;function i(){r!==void 0&&(Br.remove(r),r=void 0)}return Ae(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){r={condition:()=>n.value===!0,handler:t},Br.add(r)}}}const ur={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},sr=["beforeShow","show","beforeHide","hide"];function lr({showing:e,canShow:t,hideOnRouteChange:n,handleShow:r,handleHide:i,processOnMount:a}){const o=me(),{props:u,emit:s,proxy:l}=o;let c;function f(_){e.value===!0?h(_):d(_)}function d(_){if(u.disable===!0||_!==void 0&&_.qAnchorHandled===!0||t!==void 0&&t(_)!==!0)return;const y=u["onUpdate:modelValue"]!==void 0;y===!0&&(s("update:modelValue",!0),c=_,jt(()=>{c===_&&(c=void 0)})),(u.modelValue===null||y===!1)&&v(_)}function v(_){e.value!==!0&&(e.value=!0,s("beforeShow",_),r!==void 0?r(_):s("show",_))}function h(_){if(u.disable===!0)return;const y=u["onUpdate:modelValue"]!==void 0;y===!0&&(s("update:modelValue",!1),c=_,jt(()=>{c===_&&(c=void 0)})),(u.modelValue===null||y===!1)&&p(_)}function p(_){e.value!==!1&&(e.value=!1,s("beforeHide",_),i!==void 0?i(_):s("hide",_))}function g(_){u.disable===!0&&_===!0?u["onUpdate:modelValue"]!==void 0&&s("update:modelValue",!1):_===!0!==e.value&&(_===!0?v:p)(c)}le(()=>u.modelValue,g),n!==void 0&&ca(o)===!0&&le(()=>l.$route.fullPath,()=>{n.value===!0&&e.value===!0&&h()}),a===!0&&ci(()=>{g(u.modelValue)});const w={show:d,hide:h,toggle:f};return Object.assign(l,w),w}let it=0,_n,bn,at,wn=!1,Hr,qr,zr,Be=null;function Ra(e){Ma(e)&&_t(e)}function Ma(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=fa(e),n=e.shiftKey&&!e.deltaX,r=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=n||r?e.deltaY:e.deltaX;for(let a=0;a<t.length;a++){const o=t[a];if(Aa(o,r))return r?i<0&&o.scrollTop===0?!0:i>0&&o.scrollTop+o.clientHeight===o.scrollHeight:i<0&&o.scrollLeft===0?!0:i>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function jr(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Ct(e){wn!==!0&&(wn=!0,requestAnimationFrame(()=>{wn=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:r}=document.scrollingElement;(at===void 0||t!==window.innerHeight)&&(at=n-t,document.scrollingElement.scrollTop=r),r>at&&(document.scrollingElement.scrollTop-=Math.ceil((r-at)/8))}))}function Wr(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:r,overflowX:i}=window.getComputedStyle(t);_n=wa(window),bn=Ea(window),Hr=t.style.left,qr=t.style.top,zr=window.location.href,t.style.left=`-${_n}px`,t.style.top=`-${bn}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,se.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Ct,he.passiveCapture),window.visualViewport.addEventListener("scroll",Ct,he.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",jr,he.passiveCapture))}se.is.desktop===!0&&se.is.mac===!0&&window[`${e}EventListener`]("wheel",Ra,he.notPassive),e==="remove"&&(se.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Ct,he.passiveCapture),window.visualViewport.removeEventListener("scroll",Ct,he.passiveCapture)):window.removeEventListener("scroll",jr,he.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=Hr,t.style.top=qr,window.location.href===zr&&window.scrollTo(_n,bn),at=void 0)}function Ba(e){let t="add";if(e===!0){if(it++,Be!==null){clearTimeout(Be),Be=null;return}if(it>1)return}else{if(it===0||(it--,it>0))return;if(t="remove",se.is.ios===!0&&se.is.nativeMobile===!0){Be!==null&&clearTimeout(Be),Be=setTimeout(()=>{Wr(t),Be=null},100);return}}Wr(t)}function Ka(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,Ba(t))}}}function cr(){let e=null;const t=me();function n(){e!==null&&(clearTimeout(e),e=null)}return fi(n),Ae(n),{removeTimeout:n,registerTimeout(r,i){n(),di(t)===!1&&(e=setTimeout(()=>{e=null,r()},i))}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K=function(){return K=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},K.apply(this,arguments)};function kn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var q=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,J=Object.keys,ae=Array.isArray;typeof Promise!="undefined"&&!q.Promise&&(q.Promise=Promise);function ue(e,t){return typeof t!="object"||J(t).forEach(function(n){e[n]=t[n]}),e}var ft=Object.getPrototypeOf,Na={}.hasOwnProperty;function fe(e,t){return Na.call(e,t)}function Ge(e,t){typeof t=="function"&&(t=t(ft(e))),(typeof Reflect=="undefined"?J:Reflect.ownKeys)(t).forEach(function(n){Te(e,n,t[n])})}var yi=Object.defineProperty;function Te(e,t,n,r){yi(e,t,ue(n&&fe(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function et(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Te(e.prototype,"constructor",e),{extend:Ge.bind(null,e.prototype)}}}}var Fa=Object.getOwnPropertyDescriptor;function fr(e,t){var n=Fa(e,t),r;return n||(r=ft(e))&&fr(r,t)}var La=[].slice;function ln(e,t,n){return La.call(e,t,n)}function gi(e,t){return t(e)}function ot(e){if(!e)throw new Error("Assertion Failed")}function _i(e){q.setImmediate?setImmediate(e):setTimeout(e,0)}function bi(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function Ha(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function Ee(e,t){if(typeof t=="string"&&fe(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=Ee(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u===void 0?void 0:Ee(u,t.substr(o+1))}}function de(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ot(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)de(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),u=t.substr(a+1);if(u==="")n===void 0?ae(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var s=e[o];(!s||!fe(e,o))&&(s=e[o]={}),de(s,u,n)}}else n===void 0?ae(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function qa(e,t){typeof t=="string"?de(e,t,void 0):"length"in t&&[].map.call(t,function(n){de(e,n,void 0)})}function wi(e){var t={};for(var n in e)fe(e,n)&&(t[n]=e[n]);return t}var za=[].concat;function Ei(e){return za.apply([],e)}var Ai="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ei([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return q[e]}),ja=Ai.map(function(e){return q[e]});bi(Ai,function(e){return[e,!0]});var Se=null;function bt(e){Se=typeof WeakMap!="undefined"&&new WeakMap;var t=Rn(e);return Se=null,t}function Rn(e){if(!e||typeof e!="object")return e;var t=Se&&Se.get(e);if(t)return t;if(ae(e)){t=[],Se&&Se.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Rn(e[n]))}else if(ja.indexOf(e.constructor)>=0)t=e;else{var i=ft(e);t=i===Object.prototype?{}:Object.create(i),Se&&Se.set(e,t);for(var a in e)fe(e,a)&&(t[a]=Rn(e[a]))}return t}var Wa={}.toString;function Mn(e){return Wa.call(e).slice(8,-1)}var Bn=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",Va=typeof Bn=="symbol"?function(e){var t;return e!=null&&(t=e[Bn])&&t.apply(e)}:function(){return null},Ye={};function be(e){var t,n,r,i;if(arguments.length===1){if(ae(e))return e.slice();if(this===Ye&&typeof e=="string")return[e];if(i=Va(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var dr=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ye=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ti(e,t){ye=e,xi=t}var xi=function(){return!0},Ua=!new Error("").stack;function Ve(){if(Ua)try{throw Ve.arguments,new Error}catch(e){return e}return new Error}function Kn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(xi).map(function(r){return`
`+r}).join("")):""}var $a=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ci=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],hr=$a.concat(Ci),Ya={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function tt(e,t){this._e=Ve(),this.name=e,this.message=t}et(tt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Kn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Ii(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Ut(e,t,n,r){this._e=Ve(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ii(e,t)}et(Ut).from(tt);function st(e,t){this._e=Ve(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Ii(e,t)}et(st).from(tt);var vr=hr.reduce(function(e,t){return e[t]=t+"Error",e},{}),Qa=tt,D=hr.reduce(function(e,t){var n=t+"Error";function r(i,a){this._e=Ve(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Ya[t]||n,this.inner=null)}return et(r).from(Qa),e[t]=r,e},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Vr=Ci.reduce(function(e,t){return e[t+"Error"]=D[t],e},{});function Xa(e,t){if(!e||e instanceof tt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Vr[e.name])return e;var n=new Vr[e.name](t||e.message,e);return"stack"in e&&Te(n,"stack",{get:function(){return this.inner.stack}}),n}var cn=hr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=D[t]),e},{});cn.ModifyError=Ut;cn.DexieError=tt;cn.BulkError=st;function L(){}function wt(e){return e}function Ja(e,t){return e==null||e===wt?t:function(n){return t(e(n))}}function je(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ga(e,t){return e===L?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?je(r,this.onsuccess):r),i&&(this.onerror=this.onerror?je(i,this.onerror):i),a!==void 0?a:n}}function Za(e,t){return e===L?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?je(n,this.onsuccess):n),r&&(this.onerror=this.onerror?je(r,this.onerror):r)}}function eo(e,t){return e===L?t:function(n){var r=e.apply(this,arguments);ue(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?je(i,this.onsuccess):i),a&&(this.onerror=this.onerror?je(a,this.onerror):a),r===void 0?o===void 0?void 0:o:ue(r,o)}}function to(e,t){return e===L?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function pr(e,t){return e===L?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var dt={},no=100,ro=20,Si=100,mr=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,ft(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ft(t),e]}(),Nn=mr[0],$t=mr[1],Fn=mr[2],Oi=$t&&$t.then,Bt=Nn&&Nn.constructor,yr=!!Fn,Ln=!1,io=Fn?function(){Fn.then(It)}:q.setImmediate?setImmediate.bind(null,It):q.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){It(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(It,0)},ht=function(e,t){ut.push([e,t]),Yt&&(io(),Yt=!1)},Hn=!0,Yt=!0,Fe=[],Kt=[],qn=null,zn=wt,Xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Yr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Yr(e[0],e[1])}catch{}})}},I=Xe,ut=[],Le=0,Nt=[];function x(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=L,this._lib=!1;var t=this._PSD=I;if(ye&&(this._stackHolder=Ve(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==dt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Wn(this,this._value);return}this._state=null,this._value=null,++t.ref,Pi(this,e)}var jn={get:function(){var e=I,t=Qt;function n(r,i){var a=this,o=!e.global&&(e!==I||t!==Qt),u=o&&!xe(),s=new x(function(l,c){gr(a,new Di(Jt(r,e,o,u),Jt(i,e,o,u),l,c,e))});return ye&&Mi(s,this),s}return n.prototype=dt,n},set:function(e){Te(this,"then",e&&e.prototype===dt?jn:{get:function(){return e},set:jn.set})}};Ge(x.prototype,{then:jn,_then:function(e,t){gr(this,new Di(null,null,e,t,I))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ft(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ft(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ft(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Ln=!0;var e=Ri(this,[],ro),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Ln=!1}}},timeout:function(e,t){var n=this;return e<1/0?new x(function(r,i){var a=setTimeout(function(){return i(new D.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&Te(x.prototype,Symbol.toStringTag,"Dexie.Promise");Xe.env=Bi();function Di(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Ge(x,{all:function(){var e=be.apply(null,arguments).map(Xt);return new x(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return x.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof x)return e;if(e&&typeof e.then=="function")return new x(function(n,r){e.then(n,r)});var t=new x(dt,!0,e);return Mi(t,qn),t},reject:Ft,race:function(){var e=be.apply(null,arguments).map(Xt);return new x(function(t,n){e.map(function(r){return x.resolve(r).then(t,n)})})},PSD:{get:function(){return I},set:function(e){return I=e}},totalEchoes:{get:function(){return Qt}},newPSD:Pe,usePSD:rt,scheduler:{get:function(){return ht},set:function(e){ht=e}},rejectionMapper:{get:function(){return zn},set:function(e){zn=e}},follow:function(e,t){return new x(function(n,r){return Pe(function(i,a){var o=I;o.unhandleds=[],o.onunhandled=a,o.finalize=je(function(){var u=this;oo(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),e()},t,n,r)})}});Bt&&(Bt.allSettled&&Te(x,"allSettled",function(){var e=be.apply(null,arguments).map(Xt);return new x(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return x.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Bt.any&&typeof AggregateError!="undefined"&&Te(x,"any",function(){var e=be.apply(null,arguments).map(Xt);return new x(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return x.resolve(a).then(function(u){return t(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function Pi(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Et();n&&typeof n.then=="function"?Pi(e,function(i,a){n instanceof x?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,ki(e)),r&&At()}},Wn.bind(null,e))}catch(n){Wn(e,n)}}function Wn(e,t){if(Kt.push(t),e._state===null){var n=e._lib&&Et();t=zn(t),e._state=!1,e._value=t,ye&&t!==null&&typeof t=="object"&&!t._promise&&Ha(function(){var r=fr(t,"stack");t._promise=e,Te(t,"stack",{get:function(){return Ln?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),uo(e),ki(e),n&&At()}}function ki(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)gr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Le===0&&(++Le,ht(function(){--Le===0&&_r()},[]))}function gr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Le,ht(ao,[n,e,t])}function ao(e,t,n){try{qn=t;var r,i=t._value;t._state?r=e(i):(Kt.length&&(Kt=[]),r=e(i),Kt.indexOf(i)===-1&&so(t)),n.resolve(r)}catch(a){n.reject(a)}finally{qn=null,--Le===0&&_r(),--n.psd.ref||n.psd.finalize()}}function Ri(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=Kn(i,0)):(a=i,o=""),t.push(a+(o?": "+o:"")+r)}return ye&&(r=Kn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ri(e._prev,t,n)),t}function Mi(e,t){var n=t?t._numPrev+1:0;n<no&&(e._prev=t,e._numPrev=n)}function It(){Et()&&At()}function Et(){var e=Hn;return Hn=!1,Yt=!1,e}function At(){var e,t,n;do for(;ut.length>0;)for(e=ut,ut=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(ut.length>0);Hn=!0,Yt=!0}function _r(){var e=Fe;Fe=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Nt.slice(0),n=t.length;n;)t[--n]()}function oo(e){function t(){e(),Nt.splice(Nt.indexOf(t),1)}Nt.push(t),++Le,ht(function(){--Le===0&&_r()},[])}function uo(e){Fe.some(function(t){return t._value===e._value})||Fe.push(e)}function so(e){for(var t=Fe.length;t;)if(Fe[--t]._value===e._value){Fe.splice(t,1);return}}function Ft(e){return new x(dt,!1,e)}function z(e,t){var n=I;return function(){var r=Et(),i=I;try{return ke(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ke(i,!1),r&&At()}}}var ie={awaits:0,echoes:0,id:0},lo=0,Lt=[],En=0,Qt=0,co=0;function Pe(e,t,n,r){var i=I,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++co;var o=Xe.env;a.env=yr?{Promise:x,PromiseProp:{value:x,configurable:!0,writable:!0},all:x.all,race:x.race,allSettled:x.allSettled,any:x.any,resolve:x.resolve,reject:x.reject,nthen:Ur(o.nthen,a),gthen:Ur(o.gthen,a)}:{},t&&ue(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=rt(a,e,n,r);return a.ref===0&&a.finalize(),u}function nt(){return ie.id||(ie.id=++lo),++ie.awaits,ie.echoes+=Si,ie.id}function xe(){return ie.awaits?(--ie.awaits===0&&(ie.id=0),ie.echoes=ie.awaits*Si,!0):!1}(""+Oi).indexOf("[native code]")===-1&&(nt=xe=L);function Xt(e){return ie.echoes&&e&&e.constructor===Bt?(nt(),e.then(function(t){return xe(),t},function(t){return xe(),G(t)})):e}function fo(e){++Qt,(!ie.echoes||--ie.echoes===0)&&(ie.echoes=ie.id=0),Lt.push(I),ke(e,!0)}function ho(){var e=Lt[Lt.length-1];Lt.pop(),ke(e,!1)}function ke(e,t){var n=I;if((t?ie.echoes&&(!En++||e!==I):En&&(!--En||e!==I))&&Ki(t?fo.bind(null,e):ho),e!==I&&(I=e,n===Xe&&(Xe.env=Bi()),yr)){var r=Xe.env.Promise,i=e.env;$t.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(q,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Bi(){var e=q.Promise;return yr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(q,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:$t.then,gthen:e.prototype.then}:{}}function rt(e,t,n,r,i){var a=I;try{return ke(e,!0),t(n,r,i)}finally{ke(a,!1)}}function Ki(e){Oi.call(Nn,e)}function Jt(e,t,n,r){return typeof e!="function"?e:function(){var i=I;n&&nt(),ke(t,!0);try{return e.apply(this,arguments)}finally{ke(i,!1),r&&Ki(xe)}}}function Ur(e,t){return function(n,r){return e.call(this,Jt(n,t),Jt(r,t))}}var $r="unhandledrejection";function Yr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(q.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent($r,!0,!0),ue(r,i)):q.CustomEvent&&(r=new CustomEvent($r,{detail:i}),ue(r,i)),r&&q.dispatchEvent&&(dispatchEvent(r),!q.PromiseRejectionEvent&&q.onunhandledrejection))try{q.onunhandledrejection(r)}catch{}ye&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var G=x.reject;function Vn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!I.letThrough&&!e._vip){if(e._state.openComplete)return G(new D.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return G(new D.DatabaseClosed);e.open().catch(L)}return e._state.dbReadyPromise.then(function(){return Vn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===vr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Vn(e,t,n,r)})):G(a)}return i._promise(t,function(a,o){return Pe(function(){return I.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var Qr="3.2.5",Ne=String.fromCharCode(65535),Un=-1/0,ge="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ni="String expected.",lt=[],fn=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vo=fn,po=fn,Fi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},dn="__dbnames",An="readonly",Tn="readwrite";function We(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Li={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function St(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=bt(t),delete t[e]),t}:function(t){return t}}var mo=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||I.trans,a=this.name;function o(s,l,c){if(!c.schema[a])throw new D.NotFound("Table "+a+" not part of transaction");return n(c.idbtrans,c)}var u=Et();try{return i&&i.db===this.db?i===I.trans?i._promise(t,o,r):Pe(function(){return i._promise(t,o,r)},{trans:i,transless:I.transless||I}):Vn(this.db,t,[this.name],o)}finally{u&&At()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(ae(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=J(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(f){if(f.compound&&n.every(function(v){return f.keyPath.indexOf(v)>=0})){for(var d=0;d<n.length;++d)if(n.indexOf(f.keyPath[d])===-1)return!1;return!0}return!1}).sort(function(f,d){return f.keyPath.length-d.keyPath.length})[0];if(r&&this.db._maxKey!==Ne){var i=r.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(f){return t[f]}))}!r&&ye&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var a=this.schema.idxByName,o=this.db._deps.indexedDB;function u(f,d){try{return o.cmp(f,d)===0}catch{return!1}}var s=n.reduce(function(f,d){var v=f[0],h=f[1],p=a[d],g=t[d];return[v||p,v||!p?We(h,p&&p.multi?function(w){var _=Ee(w,d);return ae(_)&&_.some(function(y){return u(g,y)})}:function(w){return u(g,Ee(w,d))}):h]},[null,null]),l=s[0],c=s[1];return l?this.where(l.name).equals(t[l.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,ae(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var a in r)if(fe(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){ue(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=St(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?x.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{de(t,o,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!ae(t)){var r=Ee(t,this.schema.primKey.keyPath);if(r===void 0)return G(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?J(n).forEach(function(i){de(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=St(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?x.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{de(t,o,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?x.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Li})}).then(function(n){return n.numFailures?x.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(St(c)):t;return i.core.mutate({trans:u,type:"add",keys:a,values:d,wantResults:o}).then(function(v){var h=v.numFailures,p=v.results,g=v.lastResult,w=v.failures,_=o?p:g;if(h===0)return _;throw new st(i.name+".bulkAdd(): "+h+" of "+f+" operations failed",w)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(St(c)):t;return i.core.mutate({trans:u,type:"put",keys:a,values:d,wantResults:o}).then(function(v){var h=v.numFailures,p=v.results,g=v.lastResult,w=v.failures,_=o?p:g;if(h===0)return _;throw new st(i.name+".bulkPut(): "+h+" of "+f+" operations failed",w)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new st(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",u)})},e}();function Tt(e){var t={},n=function(u,s){if(s){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[u].subscribe.apply(null,c),e}else if(typeof u=="string")return t[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,l){if(typeof u=="object")return o(u);s||(s=to),l||(l=L);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=s(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(d){return d!==f}),c.fire=c.subscribers.reduce(s,l)}};return t[u]=n[u]=c,c}function o(u){J(u).forEach(function(s){var l=u[s];if(ae(l))a(s,u[s][0],u[s][1]);else if(l==="asap")var c=a(s,wt,function(){for(var d=arguments.length,v=new Array(d);d--;)v[d]=arguments[d];c.subscribers.forEach(function(h){_i(function(){h.apply(null,v)})})});else throw new D.InvalidArgument("Invalid event config")})}}function xt(e,t){return et(t).from({prototype:e}),t}function yo(e){return xt(mo.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Tt(null,{creating:[Ga,L],reading:[Ja,wt],updating:[eo,L],deleting:[Za,L]})})}function Ue(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xn(e,t){e.filter=We(e.filter,t)}function Cn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return We(r(),t())}:t,e.justLimit=n&&!r}function go(e,t){e.isMatch=We(e.isMatch,t)}function Ht(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new D.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Xr(e,t,n){var r=Ht(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Ot(e,t,n,r){var i=e.replayFilter?We(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(u,s,l){if(!i||i(s,l,function(d){return s.stop(d)},function(d){return s.fail(d)})){var c=s.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),fe(a,f)||(a[f]=!0,t(u,s,l))}};return Promise.all([e.or._iterate(o,n),Jr(Xr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return Jr(Xr(e,r,n),We(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Jr(e,t,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=z(i);return e.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!t||t(o,function(s){return u=s},function(s){o.stop(s),u=L},function(s){o.fail(s),u=L}))&&a(o.value,o,function(s){return u=s}),u()})})}function oe(e,t){try{var n=Gr(e),r=Gr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return bo(Zr(e),Zr(t));case"Array":return _o(e,t)}}catch{}return NaN}function _o(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=oe(e[a],t[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function bo(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function Gr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Mn(e);return n==="ArrayBuffer"?"binary":n}function Zr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var wo=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,G.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,G.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=We(n.algorithm,t)},e.prototype._iterate=function(t,n){return Ot(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&ue(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Ot(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Ue(i,!0))return a.count({trans:r,query:{index:Ht(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return Ot(i,function(){return++o,!1},r,a).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function o(l,c){return c?o(l[r[c]],c-1):l[i]}var u=this._ctx.dir==="next"?1:-1;function s(l,c){var f=o(l,a),d=o(c,a);return f<d?-u:f>d?u:0}return this.toArray(function(l){return l.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ue(i,!0)&&i.limit>0){var a=i.valueMapper,o=Ht(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var l=s.result;return a?l.map(a):l})}else{var u=[];return Ot(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Ue(n)?Cn(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):Cn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Cn(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return xn(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return xn(this._ctx,function(n){return t(n.value)}),go(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Ue(n,!0)&&n.limit>0)return this._read(function(i){var a=Ht(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return xn(this._ctx,function(i){var a=i.primaryKey.toString(),o=fe(r,a);return r[a]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var o=J(t),u=o.length;a=function(w){for(var _=!1,y=0;y<u;++y){var b=o[y],m=t[b];Ee(w,b)!==m&&(de(w,b,m),_=!0)}return _}}var s=r.table.core,l=s.schema.primaryKey,c=l.outbound,f=l.extractKey,d=n.db._options.modifyChunkSize||200,v=[],h=0,p=[],g=function(w,_){var y=_.failures,b=_.numFailures;h+=w-b;for(var m=0,E=J(y);m<E.length;m++){var T=E[m];v.push(y[T])}};return n.clone().primaryKeys().then(function(w){var _=function(y){var b=Math.min(d,w.length-y);return s.getMany({trans:i,keys:w.slice(y,y+b),cache:"immutable"}).then(function(m){for(var E=[],T=[],A=c?[]:null,C=[],S=0;S<b;++S){var M=m[S],B={value:bt(M),primKey:w[y+S]};a.call(B,B.value,B)!==!1&&(B.value==null?C.push(w[y+S]):!c&&oe(f(M),f(B.value))!==0?(C.push(w[y+S]),E.push(B.value)):(T.push(B.value),c&&A.push(w[y+S])))}var k=Ue(r)&&r.limit===1/0&&(typeof t!="function"||t===In)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&s.mutate({trans:i,type:"add",values:E}).then(function(j){for(var O in j.failures)C.splice(parseInt(O),1);g(E.length,j)})).then(function(){return(T.length>0||k&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:A,values:T,criteria:k,changeSpec:typeof t!="function"&&t}).then(function(j){return g(T.length,j)})}).then(function(){return(C.length>0||k&&t===In)&&s.mutate({trans:i,type:"delete",keys:C,criteria:k}).then(function(j){return g(C.length,j)})}).then(function(){return w.length>y+b&&_(y+d)})})};return _(0).then(function(){if(v.length>0)throw new Ut("Error modifying one or more objects",v,h,p);return w.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Ue(t)&&(t.isPrimKey&&!po||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures;u.lastResult,u.results;var l=u.numFailures;if(l)throw new Ut("Could not delete some values",Object.keys(s).map(function(c){return s[c]}),o-l);return o-l})})}):this.modify(In)},e}(),In=function(e,t){return t.value=null};function Eo(e){return xt(wo.prototype,function(n,r){this.db=e;var i=Li,a=null;if(r)try{i=r()}catch(l){a=l}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==wt?s:null}})}function Ao(e,t){return e<t?-1:e===t?0:1}function To(e,t){return e>t?-1:e===t?0:1}function ce(e,t,n){var r=e instanceof qi?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function $e(e){return new e.Collection(e,function(){return Hi("")}).limit(0)}function xo(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Co(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Io(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),u=-1,s=0;s<o;++s){var l=t[s];if(l!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],l)<0&&(u=s)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function Dt(e,t,n,r){var i,a,o,u,s,l,c,f=n.length;if(!n.every(function(p){return typeof p=="string"}))return ce(e,Ni);function d(p){i=xo(p),a=Co(p),o=p==="next"?Ao:To;var g=n.map(function(w){return{lower:a(w),upper:i(w)}}).sort(function(w,_){return o(w.lower,_.lower)});u=g.map(function(w){return w.upper}),s=g.map(function(w){return w.lower}),l=p,c=p==="next"?"":r}d("next");var v=new e.Collection(e,function(){return Ie(u[0],s[f-1]+r)});v._ondirectionchange=function(p){d(p)};var h=0;return v._addAlgorithm(function(p,g,w){var _=p.key;if(typeof _!="string")return!1;var y=a(_);if(t(y,s,h))return!0;for(var b=null,m=h;m<f;++m){var E=Io(_,y,u[m],s[m],o,l);E===null&&b===null?h=m+1:(b===null||o(b,E)>0)&&(b=E)}return g(b!==null?function(){p.continue(b+c)}:w),!1}),v}function Ie(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Hi(e){return{type:1,lower:e,upper:e}}var qi=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?$e(this):new this.Collection(this,function(){return Ie(t,n,!r,!i)})}catch{return ce(this,ge)}},e.prototype.equals=function(t){return t==null?ce(this,ge):new this.Collection(this,function(){return Hi(t)})},e.prototype.above=function(t){return t==null?ce(this,ge):new this.Collection(this,function(){return Ie(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ce(this,ge):new this.Collection(this,function(){return Ie(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ce(this,ge):new this.Collection(this,function(){return Ie(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ce(this,ge):new this.Collection(this,function(){return Ie(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ce(this,Ni):this.between(t,t+Ne,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Dt(this,function(n,r){return n.indexOf(r[0])===0},[t],Ne)},e.prototype.equalsIgnoreCase=function(t){return Dt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=be.apply(Ye,arguments);return t.length===0?$e(this):Dt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=be.apply(Ye,arguments);return t.length===0?$e(this):Dt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ne)},e.prototype.anyOf=function(){var t=this,n=be.apply(Ye,arguments),r=this._cmp;try{n.sort(r)}catch{return ce(this,ge)}if(n.length===0)return $e(this);var i=new this.Collection(this,function(){return Ie(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var l=o.key;r(l,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(l,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Un,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=be.apply(Ye,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ce(this,ge)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Un,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(t.length===0)return $e(this);if(!t.every(function(m){return m[0]!==void 0&&m[1]!==void 0&&a(m[0],m[1])<=0}))return ce(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(m,E){for(var T=0,A=m.length;T<A;++T){var C=m[T];if(i(E[0],C[1])<0&&i(E[1],C[0])>0){C[0]=u(C[0],E[0]),C[1]=s(C[1],E[1]);break}}return T===A&&m.push(E),m}var d=a;function v(m,E){return d(m[0],E[0])}var h;try{h=t.reduce(f,[]),h.sort(v)}catch{return ce(this,ge)}var p=0,g=c?function(m){return a(m,h[p][1])>0}:function(m){return a(m,h[p][1])>=0},w=l?function(m){return o(m,h[p][0])>0}:function(m){return o(m,h[p][0])>=0};function _(m){return!g(m)&&!w(m)}var y=g,b=new this.Collection(this,function(){return Ie(h[0][0],h[h.length-1][1],!l,!c)});return b._ondirectionchange=function(m){m==="next"?(y=g,d=a):(y=w,d=o),h.sort(v)},b._addAlgorithm(function(m,E,T){for(var A=m.key;y(A);)if(++p,p===h.length)return E(T),!1;return _(A)?!0:(r._cmp(A,h[p][1])===0||r._cmp(A,h[p][0])===0||E(function(){d===a?m.continue(h[p][0]):m.continue(h[p][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=be.apply(Ye,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?$e(this):this.inAnyRange(t.map(function(n){return[n,n+Ne]})):ce(this,"startsWithAnyOf() only works with strings")},e}();function So(e){return xt(qi.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=e._deps.indexedDB;if(!a)throw new D.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,u){return a.cmp(u,o)},this._max=function(o,u){return a.cmp(o,u)>0?o:u},this._min=function(o,u){return a.cmp(o,u)<0?o:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function ve(e){return z(function(t){return vt(t),e(t.target.error),!1})}function vt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var pt="storagemutated",De="x-storagemutated-1",Re=Tt(null,pt),Oo=function(){function e(){}return e.prototype._lock=function(){return ot(!I.global),++this._reculock,this._reculock===1&&!I.global&&(I.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ot(!I.global),--this._reculock===0)for(I.global||(I.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{rt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&I.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(ot(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new D.DatabaseClosed(i);case"MissingAPIError":throw new D.MissingAPI(i.message,i);default:throw new D.OpenFailed(i)}if(!this.active)throw new D.TransactionInactive;return ot(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=z(function(a){vt(a),n._reject(t.error)}),t.onabort=z(function(a){vt(a),n.active&&n._reject(new D.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=z(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Re.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return G(new D.ReadOnly("Transaction is readonly"));if(!this.active)return G(new D.TransactionInactive);if(this._locked())return new x(function(o,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,u)},I])});if(r)return Pe(function(){var o=new x(function(u,s){i._lock();var l=n(u,s,i);l&&l.then&&l.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new x(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=x.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new x(function(o,u){r.then(function(s){return n._waitingQueue.push(z(o.bind(null,s)))},function(s){return n._waitingQueue.push(z(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(fe(n,t))return n[t];var r=this.schema[t];if(!r)throw new D.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Do(e){return xt(Oo.prototype,function(n,r,i,a,o){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new x(function(s,l){u._resolve=s,u._reject=l}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var l=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):l&&u.idbtrans&&u.idbtrans.abort(),G(s)})})}function $n(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+zi(t)}}function zi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ji(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:bi(n,function(r){return[r.name,r]})}}function Po(e){return e.length===1?e[0]:e}var mt=function(e){try{return e.only([[]]),mt=function(){return[[]]},[[]]}catch{return mt=function(){return Ne},Ne}};function Yn(e){return e==null?function(){}:typeof e=="string"?ko(e):function(t){return Ee(t,e)}}function ko(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return Ee(n,e)}}function ei(e){return[].slice.call(e)}var Ro=0;function ct(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Mo(e,t,n){function r(f,d){var v=ei(f.objectStoreNames);return{schema:{name:f.name,tables:v.map(function(h){return d.objectStore(h)}).map(function(h){var p=h.keyPath,g=h.autoIncrement,w=ae(p),_=p==null,y={},b={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:w,keyPath:p,autoIncrement:g,unique:!0,extractKey:Yn(p)},indexes:ei(h.indexNames).map(function(m){return h.index(m)}).map(function(m){var E=m.name,T=m.unique,A=m.multiEntry,C=m.keyPath,S=ae(C),M={name:E,compound:S,keyPath:C,unique:T,multiEntry:A,extractKey:Yn(C)};return y[ct(C)]=M,M}),getIndexByKeyPath:function(m){return y[ct(m)]}};return y[":id"]=b.primaryKey,p!=null&&(y[ct(p)]=b.primaryKey),b})},hasGetAll:v.length>0&&"getAll"in d.objectStore(v[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=f.lower,v=f.upper,h=f.lowerOpen,p=f.upperOpen,g=d===void 0?v===void 0?null:t.upperBound(v,!!p):v===void 0?t.lowerBound(d,!!h):t.bound(d,v,!!h,!!p);return g}function a(f){var d=f.name;function v(g){var w=g.trans,_=g.type,y=g.keys,b=g.values,m=g.range;return new Promise(function(E,T){E=z(E);var A=w.objectStore(d),C=A.keyPath==null,S=_==="put"||_==="add";if(!S&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var M=(y||b||{length:1}).length;if(y&&b&&y.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(M===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var B,k=[],j=[],O=0,W=function(te){++O,vt(te)};if(_==="deleteRange"){if(m.type===4)return E({numFailures:O,failures:j,results:[],lastResult:void 0});m.type===3?k.push(B=A.clear()):k.push(B=A.delete(i(m)))}else{var U=S?C?[b,y]:[b,null]:[y,null],ee=U[0],Y=U[1];if(S)for(var Q=0;Q<M;++Q)k.push(B=Y&&Y[Q]!==void 0?A[_](ee[Q],Y[Q]):A[_](ee[Q])),B.onerror=W;else for(var Q=0;Q<M;++Q)k.push(B=A[_](ee[Q])),B.onerror=W}var re=function(te){var H=te.target.result;k.forEach(function($,ne){return $.error!=null&&(j[ne]=$.error)}),E({numFailures:O,failures:j,results:_==="delete"?y:k.map(function($){return $.result}),lastResult:H})};B.onerror=function(te){W(te),re(te)},B.onsuccess=re})}function h(g){var w=g.trans,_=g.values,y=g.query,b=g.reverse,m=g.unique;return new Promise(function(E,T){E=z(E);var A=y.index,C=y.range,S=w.objectStore(d),M=A.isPrimaryKey?S:S.index(A.name),B=b?m?"prevunique":"prev":m?"nextunique":"next",k=_||!("openKeyCursor"in M)?M.openCursor(i(C),B):M.openKeyCursor(i(C),B);k.onerror=ve(T),k.onsuccess=z(function(j){var O=k.result;if(!O){E(null);return}O.___id=++Ro,O.done=!1;var W=O.continue.bind(O),U=O.continuePrimaryKey;U&&(U=U.bind(O));var ee=O.advance.bind(O),Y=function(){throw new Error("Cursor not started")},Q=function(){throw new Error("Cursor not stopped")};O.trans=w,O.stop=O.continue=O.continuePrimaryKey=O.advance=Y,O.fail=z(T),O.next=function(){var re=this,te=1;return this.start(function(){return te--?re.continue():re.stop()}).then(function(){return re})},O.start=function(re){var te=new Promise(function($,ne){$=z($),k.onerror=ve(ne),O.fail=ne,O.stop=function(P){O.stop=O.continue=O.continuePrimaryKey=O.advance=Q,$(P)}}),H=function(){if(k.result)try{re()}catch($){O.fail($)}else O.done=!0,O.start=function(){throw new Error("Cursor behind last entry")},O.stop()};return k.onsuccess=z(function($){k.onsuccess=H,H()}),O.continue=W,O.continuePrimaryKey=U,O.advance=ee,H(),te},E(O)},T)})}function p(g){return function(w){return new Promise(function(_,y){_=z(_);var b=w.trans,m=w.values,E=w.limit,T=w.query,A=E===1/0?void 0:E,C=T.index,S=T.range,M=b.objectStore(d),B=C.isPrimaryKey?M:M.index(C.name),k=i(S);if(E===0)return _({result:[]});if(g){var j=m?B.getAll(k,A):B.getAllKeys(k,A);j.onsuccess=function(ee){return _({result:ee.target.result})},j.onerror=ve(y)}else{var O=0,W=m||!("openKeyCursor"in B)?B.openCursor(k):B.openKeyCursor(k),U=[];W.onsuccess=function(ee){var Y=W.result;if(!Y)return _({result:U});if(U.push(m?Y.value:Y.primaryKey),++O===E)return _({result:U});Y.continue()},W.onerror=ve(y)}})}}return{name:d,schema:f,mutate:v,getMany:function(g){var w=g.trans,_=g.keys;return new Promise(function(y,b){y=z(y);for(var m=w.objectStore(d),E=_.length,T=new Array(E),A=0,C=0,S,M=function(O){var W=O.target;(T[W._pos]=W.result)!=null,++C===A&&y(T)},B=ve(b),k=0;k<E;++k){var j=_[k];j!=null&&(S=m.get(_[k]),S._pos=k,S.onsuccess=M,S.onerror=B,++A)}A===0&&y(T)})},get:function(g){var w=g.trans,_=g.key;return new Promise(function(y,b){y=z(y);var m=w.objectStore(d),E=m.get(_);E.onsuccess=function(T){return y(T.target.result)},E.onerror=ve(b)})},query:p(s),openCursor:h,count:function(g){var w=g.query,_=g.trans,y=w.index,b=w.range;return new Promise(function(m,E){var T=_.objectStore(d),A=y.isPrimaryKey?T:T.index(y.name),C=i(b),S=C?A.count(C):A.count();S.onsuccess=z(function(M){return m(M.target.result)}),S.onerror=ve(E)})}}}var o=r(e,n),u=o.schema,s=o.hasGetAll,l=u.tables.map(function(f){return a(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var d=c[f];if(!d)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:mt(t),schema:u}}function Bo(e,t){return t.reduce(function(n,r){var i=r.create;return K(K({},n),i(n))},e)}function Ko(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=Bo(Mo(t,i,r),e.dbcore);return{dbcore:a}}function br(e,t){var n=e._novip,r=t.db,i=Ko(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(u){return u.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function Gt(e,t,n,r){var i=e._novip;n.forEach(function(a){var o=r[a];t.forEach(function(u){var s=fr(u,a);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?Te(u,a,{get:function(){return this.table(a)},set:function(l){yi(this,a,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):u[a]=new i.Table(a,o))})})}function Qn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function No(e,t){return e._cfg.version-t._cfg.version}function Fo(e,t,n,r){var i=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=I.transless||I;Pe(function(){I.trans=a,I.transless=u,t===0?(J(i).forEach(function(s){wr(n,s,i[s].primKey,i[s].indexes)}),br(e,n),x.follow(function(){return e.on.populate.fire(a)}).catch(o)):Lo(e,t,a,n).catch(o)})}function Lo(e,t,n,r){var i=e._novip,a=[],o=i._versions,u=i._dbSchema=Er(i,i.idbdb,r),s=!1,l=o.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){a.push(function(){var d=u,v=f._cfg.dbschema;Jn(i,d,r),Jn(i,v,r),u=i._dbSchema=v;var h=Wi(d,v);h.add.forEach(function(b){wr(r,b[0],b[1].primKey,b[1].indexes)}),h.change.forEach(function(b){if(b.recreate)throw new D.Upgrade("Not yet support for changing primary key");var m=r.objectStore(b.name);b.add.forEach(function(E){return Xn(m,E)}),b.change.forEach(function(E){m.deleteIndex(E.name),Xn(m,E)}),b.del.forEach(function(E){return m.deleteIndex(E)})});var p=f._cfg.contentUpgrade;if(p&&f._cfg.version>t){br(i,r),n._memoizedTables={},s=!0;var g=wi(v);h.del.forEach(function(b){g[b]=d[b]}),Qn(i,[i.Transaction.prototype]),Gt(i,[i.Transaction.prototype],J(g),g),n.schema=g;var w=dr(p);w&&nt();var _,y=x.follow(function(){if(_=p(n),_&&w){var b=xe.bind(null,null);_.then(b,b)}});return _&&typeof _.then=="function"?x.resolve(_):y.then(function(){return _})}}),a.push(function(d){if(!s||!vo){var v=f._cfg.dbschema;qo(v,d)}Qn(i,[i.Transaction.prototype]),Gt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return a.length?x.resolve(a.shift()(n.idbtrans)).then(c):x.resolve()}return c().then(function(){Ho(u,r)})}function Wi(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!fn)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,l=void 0;for(l in u)s[l]||o.del.push(l);for(l in s){var c=u[l],f=s[l];c?c.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function wr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return Xn(i,a)}),i}function Ho(e,t){J(e).forEach(function(n){t.db.objectStoreNames.contains(n)||wr(t,n,e[n].primKey,e[n].indexes)})}function qo(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Xn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Er(e,t,n){var r={},i=ln(t.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=$n(zi(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),l=[],c=0;c<o.indexNames.length;++c){var f=o.index(o.indexNames[c]);u=f.keyPath;var d=$n(f.name,u,!!f.unique,!!f.multiEntry,!1,u&&typeof u!="string",!1);l.push(d)}r[a]=ji(a,s,l)}),r}function zo(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=Er(r,t,n);r._storeNames=ln(t.objectStoreNames,0),Gt(r,[r._allTables],J(i),i)}function jo(e,t){var n=Er(e,e.idbdb,t),r=Wi(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Jn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var l=u.indexNames[s],c=u.index(l).keyPath,f=typeof c=="string"?c:"["+ln(c).join("+")+"]";if(t[o]){var d=t[o].idxByName[f];d&&(d.name=l,delete t[o].idxByName[f],t[o].idxByName[l]=d)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&q.WorkerGlobalScope&&q instanceof q.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Wo(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return $n(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),ae(i),n===0)})}var Vo=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){J(t).forEach(function(r){if(t[r]!==null){var i=Wo(t[r]),a=i.shift();if(a.multi)throw new D.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=ji(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?ue(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(o){ue(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,Qn(n,[n._allTables,n,n.Transaction.prototype]),Gt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],J(a),a),n._storeNames=J(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=pr(this._cfg.contentUpgrade||L,t),this},e}();function Uo(e){return xt(Vo.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ar(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ir(dn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Tr(e){return e&&typeof e.databases=="function"}function $o(e){var t=e.indexedDB,n=e.IDBKeyRange;return Tr(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==dn})}):Ar(t,n).toCollection().primaryKeys()}function Yo(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Tr(n)&&t!==dn&&Ar(n,r).put({name:t}).catch(L)}function Qo(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Tr(n)&&t!==dn&&Ar(n,r).delete(t).catch(L)}function Gn(e){return Pe(function(){return I.letThrough=!0,e()})}function Xo(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Jo(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?G(t.dbOpenError):e});ye&&(t.openCanceller._stackHolder=Ve()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,o=null,u=!1,s=function(){return new x(function(l,c){if(i(),!n)throw new D.MissingAPI;var f=e.name,d=t.autoSchema?n.open(f):n.open(f,Math.round(e.verno*10));if(!d)throw new D.MissingAPI;d.onerror=ve(c),d.onblocked=z(e._fireOnBlocked),d.onupgradeneeded=z(function(v){if(o=d.transaction,t.autoSchema&&!e._options.allowEmptyDB){d.onerror=vt,o.abort(),d.result.close();var h=n.deleteDatabase(f);h.onsuccess=h.onerror=z(function(){c(new D.NoSuchDatabase("Database "+f+" doesnt exist"))})}else{o.onerror=ve(c);var p=v.oldVersion>Math.pow(2,62)?0:v.oldVersion;u=p<1,e._novip.idbdb=d.result,Fo(e,p/10,o,c)}},c),d.onsuccess=z(function(){o=null;var v=e._novip.idbdb=d.result,h=ln(v.objectStoreNames);if(h.length>0)try{var p=v.transaction(Po(h),"readonly");t.autoSchema?zo(e,v,p):(Jn(e,e._dbSchema,p),jo(e,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),br(e,p)}catch{}lt.push(e),v.onversionchange=z(function(g){t.vcFired=!0,e.on("versionchange").fire(g)}),v.onclose=z(function(g){e.on("close").fire(g)}),u&&Yo(e._deps,f),l()},c)}).catch(function(l){return l&&l.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),s()):x.reject(l)})};return x.race([r,(typeof navigator=="undefined"?x.resolve():Xo()).then(s)]).then(function(){return i(),t.onReadyBeingFired=[],x.resolve(Gn(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var c=t.onReadyBeingFired.reduce(pr,L);return t.onReadyBeingFired=[],x.resolve(Gn(function(){return c(e.vip)})).then(l)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(l){t.dbOpenError=l;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),G(l)}).finally(function(){t.openComplete=!0,a()})}function Zn(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=a(t),i=a(n);function a(o){return function(u){var s=o(u),l=s.value;return s.done?l:!l||typeof l.then!="function"?ae(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return a(t)()}function Go(e,t,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Ei(i);return[e,a,n]}function Vi(e,t,n,r,i){return x.resolve().then(function(){var a=I.transless||I,o=e._createTransaction(t,n,e._dbSchema,r),u={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===vr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Vi(e,t,n,null,i)})):G(f)}var s=dr(i);s&&nt();var l,c=x.follow(function(){if(l=i.call(o,o),l)if(s){var f=xe.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Zn(l))},u);return(l&&typeof l.then=="function"?x.resolve(l).then(function(f){return o.active?f:G(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&o._resolve(),o._completion.then(function(){return f})}).catch(function(f){return o._reject(f),G(f)})})}function Pt(e,t,n){for(var r=ae(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Zo(e){return K(K({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(p,g,w){var _=ct(p),y=i[_]=i[_]||[],b=p==null?0:typeof p=="string"?1:p.length,m=g>0,E=K(K({},w),{isVirtual:m,keyTail:g,keyLength:b,extractKey:Yn(p),unique:!m&&w.unique});if(y.push(E),E.isPrimaryKey||a.push(E),b>1){var T=b===2?p[0]:p.slice(0,b-1);o(T,g+1,w)}return y.sort(function(A,C){return A.keyTail-C.keyTail}),E}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,l=r.indexes;s<l.length;s++){var c=l[s];o(c.keyPath,0,c)}function f(p){var g=i[ct(p)];return g&&g[0]}function d(p,g){return{type:p.type===1?2:p.type,lower:Pt(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:Pt(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0}}function v(p){var g=p.query.index;return g.isVirtual?K(K({},p),{query:{index:g,range:d(p.query.range,g.keyTail)}}):p}var h=K(K({},n),{schema:K(K({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:f}),count:function(p){return n.count(v(p))},query:function(p){return n.query(v(p))},openCursor:function(p){var g=p.query.index,w=g.keyTail,_=g.isVirtual,y=g.keyLength;if(!_)return n.openCursor(p);function b(m){function E(A){A!=null?m.continue(Pt(A,p.reverse?e.MAX_KEY:e.MIN_KEY,w)):p.unique?m.continue(m.key.slice(0,y).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,w)):m.continue()}var T=Object.create(m,{continue:{value:E},continuePrimaryKey:{value:function(A,C){m.continuePrimaryKey(Pt(A,e.MAX_KEY,w),C)}},primaryKey:{get:function(){return m.primaryKey}},key:{get:function(){var A=m.key;return y===1?A[0]:A.slice(0,y)}},value:{get:function(){return m.value}}});return T}return n.openCursor(v(p)).then(function(m){return m&&b(m)})}});return h}})}var eu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Zo};function xr(e,t,n,r){return n=n||{},r=r||"",J(e).forEach(function(i){if(!fe(t,i))n[r+i]=void 0;else{var a=e[i],o=t[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=Mn(a),s=Mn(o);u!==s?n[r+i]=t[i]:u==="Object"?xr(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i])}else a!==o&&(n[r+i]=t[i])}}),J(t).forEach(function(i){fe(e,i)||(n[r+i]=t[i])}),n}function tu(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var nu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return K(K({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=K(K({},n),{mutate:function(a){var o=I.trans,u=o.table(t).hook,s=u.deleting,l=u.creating,c=u.updating;switch(a.type){case"add":if(l.fire===L)break;return o._promise("readwrite",function(){return f(a)},!0);case"put":if(l.fire===L&&c.fire===L)break;return o._promise("readwrite",function(){return f(a)},!0);case"delete":if(s.fire===L)break;return o._promise("readwrite",function(){return f(a)},!0);case"deleteRange":if(s.fire===L)break;return o._promise("readwrite",function(){return d(a)},!0)}return n.mutate(a);function f(h){var p=I.trans,g=h.keys||tu(r,h);if(!g)throw new Error("Keys missing");return h=h.type==="add"||h.type==="put"?K(K({},h),{keys:g}):K({},h),h.type!=="delete"&&(h.values=kn([],h.values,!0)),h.keys&&(h.keys=kn([],h.keys,!0)),ru(n,h,g).then(function(w){var _=g.map(function(y,b){var m=w[b],E={onerror:null,onsuccess:null};if(h.type==="delete")s.fire.call(E,y,m,p);else if(h.type==="add"||m===void 0){var T=l.fire.call(E,y,h.values[b],p);y==null&&T!=null&&(y=T,h.keys[b]=y,r.outbound||de(h.values[b],r.keyPath,y))}else{var A=xr(m,h.values[b]),C=c.fire.call(E,A,y,m,p);if(C){var S=h.values[b];Object.keys(C).forEach(function(M){fe(S,M)?S[M]=C[M]:de(S,M,C[M])})}}return E});return n.mutate(h).then(function(y){for(var b=y.failures,m=y.results,E=y.numFailures,T=y.lastResult,A=0;A<g.length;++A){var C=m?m[A]:g[A],S=_[A];C==null?S.onerror&&S.onerror(b[A]):S.onsuccess&&S.onsuccess(h.type==="put"&&w[A]?h.values[A]:C)}return{failures:b,results:m,numFailures:E,lastResult:T}}).catch(function(y){return _.forEach(function(b){return b.onerror&&b.onerror(y)}),Promise.reject(y)})})}function d(h){return v(h.trans,h.range,1e4)}function v(h,p,g){return n.query({trans:h,values:!1,query:{index:r,range:p},limit:g}).then(function(w){var _=w.result;return f({type:"delete",keys:_,trans:h}).then(function(y){return y.numFailures>0?Promise.reject(y.failures[0]):_.length<g?{failures:[],numFailures:0,lastResult:void 0}:v(h,K(K({},p),{lower:_[_.length-1],lowerOpen:!0}),g)})})}}});return i}})}};function ru(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Ui(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)oe(t.keys[i],e[a])===0&&(r.push(n?bt(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var iu={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return K(K({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Ui(r.keys,r.trans._cache,r.cache==="clone");return i?x.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?bt(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Sn;function Cr(e){return!("from"in e)}var _e=function(e,t){if(this)ue(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new _e;return e&&"d"in e&&ue(n,e),n}};Ge(_e.prototype,(Sn={add:function(e){return Zt(this,e),this},addKey:function(e){return yt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return yt(t,n,n)}),this}},Sn[Bn]=function(){return er(this)},Sn));function yt(e,t,n){var r=oe(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Cr(e))return ue(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(oe(n,e.from)<0)return i?yt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ti(e);if(oe(t,e.to)>0)return a?yt(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ti(e);oe(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),oe(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&Zt(e,i),a&&o&&Zt(e,a)}}function Zt(e,t){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;yt(r,a,o),u&&n(r,u),s&&n(r,s)}Cr(t)||n(e,t)}function au(e,t){var n=er(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=er(e),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(oe(u.from,i.to)<=0&&oe(u.to,i.from)>=0)return!0;oe(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function er(e){var t=Cr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&oe(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||oe(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ti(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=K({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],o[i]=u[a],e[a]=o,o.d=ni(o)}e.d=ni(e)}function ni(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var ou={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new _e(e.MIN_KEY,e.MAX_KEY);return K(K({},e),{table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,u=o.extractKey,s=o.outbound,l=K(K({},i),{mutate:function(d){var v=d.trans,h=v.mutatedParts||(v.mutatedParts={}),p=function(T){var A="idb://"+t+"/"+r+"/"+T;return h[A]||(h[A]=new _e)},g=p(""),w=p(":dels"),_=d.type,y=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],b=y[0],m=y[1],E=d.trans._cache;return i.mutate(d).then(function(T){if(ae(b)){_!=="delete"&&(b=T.results),g.addKeys(b);var A=Ui(b,E);!A&&_!=="add"&&w.addKeys(b),(A||m)&&uu(p,a,A,m)}else if(b){var C={from:b.lower,to:b.upper};w.add(C),g.add(C)}else g.add(n),w.add(n),a.indexes.forEach(function(S){return p(S.name).add(n)});return T})}}),c=function(d){var v,h,p=d.query,g=p.index,w=p.range;return[g,new _e((v=w.lower)!==null&&v!==void 0?v:e.MIN_KEY,(h=w.upper)!==null&&h!==void 0?h:e.MAX_KEY)]},f={get:function(d){return[o,new _e(d.key)]},getMany:function(d){return[o,new _e().addKeys(d.keys)]},count:c,query:c,openCursor:c};return J(f).forEach(function(d){l[d]=function(v){var h=I.subscr;if(h){var p=function(E){var T="idb://"+t+"/"+r+"/"+E;return h[T]||(h[T]=new _e)},g=p(""),w=p(":dels"),_=f[d](v),y=_[0],b=_[1];if(p(y.name||"").add(b),!y.isPrimaryKey)if(d==="count")w.add(n);else{var m=d==="query"&&s&&v.values&&i.query(K(K({},v),{values:!1}));return i[d].apply(this,arguments).then(function(E){if(d==="query"){if(s&&v.values)return m.then(function(S){var M=S.result;return g.addKeys(M),E});var T=v.values?E.result.map(u):E.result;v.values?g.addKeys(T):w.addKeys(T)}else if(d==="openCursor"){var A=E,C=v.values;return A&&Object.create(A,{key:{get:function(){return w.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var S=A.primaryKey;return w.addKey(S),S}},value:{get:function(){return C&&g.addKey(A.primaryKey),A.value}}})}return E})}}return i[d].apply(this,arguments)}}),l}})}};function uu(e,t,n,r){function i(a){var o=e(a.name||"");function u(l){return l!=null?a.extractKey(l):null}var s=function(l){return a.multiEntry&&ae(l)?l.forEach(function(c){return o.addKey(c)}):o.addKey(l)};(n||r).forEach(function(l,c){var f=n&&u(n[c]),d=r&&u(r[c]);oe(f,d)!==0&&(f!=null&&s(f),d!=null&&s(d))})}t.indexes.forEach(i)}var Ir=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=K({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:L,dbReadyPromise:null,cancelOpen:L,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new x(function(u){o.dbReadyResolve=u}),o.openCanceller=new x(function(u,s){o.cancelOpen=s}),this._state=o,this.name=t,this.on=Tt(this,"populate","blocked","versionchange","close",{ready:[pr,L]}),this.on.ready.subscribe=gi(this.on.ready.subscribe,function(u){return function(s,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||x.resolve().then(s),l&&u(s);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(s),l&&u(s);else{u(s);var f=r;l||u(function d(){f.on.ready.unsubscribe(s),f.on.ready.unsubscribe(d)})}})}}),this.Collection=Eo(this),this.Table=yo(this),this.Transaction=Do(this),this.Version=Uo(this),this.WhereClause=So(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=mt(n.IDBKeyRange),this._createTransaction=function(u,s,l,c){return new r.Transaction(u,s,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),lt.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(eu),this.use(nu),this.use(ou),this.use(iu),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new D.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(No),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||I.letThrough||this._vip)?t():new x(function(r,i){if(n._state.openComplete)return i(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new D.DatabaseClosed);return}n.open().catch(L)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){return Jo(this)},e.prototype._close=function(){var t=this._state,n=lt.indexOf(this);if(n>=0&&lt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new x(function(r){t.dbReadyResolve=r}),t.openCanceller=new x(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new D.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new x(function(i,a){var o=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=z(function(){Qo(t._deps,t.name),i()}),u.onerror=ve(a),u.onblocked=t._fireOnBlocked};if(n)throw new D.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return J(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Go.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=I.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===An)u=An;else if(t=="rw"||t==Tn)u=Tn;else throw new D.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===An&&u===Tn)if(o)a=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(c){if(a&&a.storeNames.indexOf(c)===-1)if(o)a=null;else throw new D.SubTransaction("Table "+c+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(c){return a?a._promise(null,function(f,d){d(c)}):G(c)}var l=Vi.bind(null,this,u,s,a,r);return a?a._promise(u,l,"lock"):I.trans?rt(I.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!fe(this._allTables,t))throw new D.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),su=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",lu=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[su]=function(){return this},e}();function $i(e,t){return J(t).forEach(function(n){var r=e[n]||(e[n]=new _e);Zt(r,t[n])}),e}function cu(e){var t=!1,n=void 0,r=new lu(function(i){var a=dr(e);function o(g){a&&nt();var w=function(){return Pe(e,{subscr:g,trans:null})},_=I.trans?rt(I.transless,w):w();return a&&_.then(xe,xe),_}var u=!1,s={},l={},c={get closed(){return u},unsubscribe:function(){u=!0,Re.storagemutated.unsubscribe(h)}};i.start&&i.start(c);var f=!1,d=!1;function v(){return J(l).some(function(g){return s[g]&&au(s[g],l[g])})}var h=function(g){$i(s,g),v()&&p()},p=function(){if(!(f||u)){s={};var g={},w=o(g);d||(Re(pt,h),d=!0),f=!0,Promise.resolve(w).then(function(_){t=!0,n=_,f=!1,!u&&(v()?p():(s={},l=g,i.next&&i.next(_)))},function(_){f=!1,t=!1,i.error&&i.error(_),c.unsubscribe()})}};return p(),c});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var tr;try{tr={indexedDB:q.indexedDB||q.mozIndexedDB||q.webkitIndexedDB||q.msIndexedDB,IDBKeyRange:q.IDBKeyRange||q.webkitIDBKeyRange}}catch{tr={indexedDB:null,IDBKeyRange:null}}var Ke=Ir;Ge(Ke,K(K({},cn),{delete:function(e){var t=new Ke(e,{addons:[]});return t.delete()},exists:function(e){return new Ke(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return $o(Ke.dependencies).then(e)}catch{return G(new D.MissingAPI)}},defineClass:function(){function e(t){ue(this,t)}return e},ignoreTransaction:function(e){return I.trans?rt(I.transless,e):e()},vip:Gn,async:function(e){return function(){try{var t=Zn(e.apply(this,arguments));return!t||typeof t.then!="function"?x.resolve(t):t}catch(n){return G(n)}}},spawn:function(e,t,n){try{var r=Zn(e.apply(n,t||[]));return!r||typeof r.then!="function"?x.resolve(r):r}catch(i){return G(i)}},currentTransaction:{get:function(){return I.trans||null}},waitFor:function(e,t){var n=x.resolve(typeof e=="function"?Ke.ignoreTransaction(e):e).timeout(t||6e4);return I.trans?I.trans.waitFor(n):n},Promise:x,debug:{get:function(){return ye},set:function(e){Ti(e,e==="dexie"?function(){return!0}:Fi)}},derive:et,extend:ue,props:Ge,override:gi,Events:Tt,on:Re,liveQuery:cu,extendObservabilitySet:$i,getByKeyPath:Ee,setByKeyPath:de,delByKeyPath:qa,shallowClone:wi,deepClone:bt,getObjectDiff:xr,cmp:oe,asap:_i,minKey:Un,addons:[],connections:lt,errnames:vr,dependencies:tr,semVer:Qr,version:Qr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Ke.maxKey=mt(Ke.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Re(pt,function(e){if(!we){var t;fn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(De,!0,!0,e)):t=new CustomEvent(De,{detail:e}),we=!0,dispatchEvent(t),we=!1}}),addEventListener(De,function(e){var t=e.detail;we||en(t)}));function en(e){var t=we;try{we=!0,Re.storagemutated.fire(e)}finally{we=t}}var we=!1;if(typeof BroadcastChannel!="undefined"){var kt=new BroadcastChannel(De);typeof kt.unref=="function"&&kt.unref(),Re(pt,function(e){we||kt.postMessage(e)}),kt.onmessage=function(e){e.data&&en(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Re(pt,function(e){try{we||(typeof localStorage!="undefined"&&localStorage.setItem(De,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&kn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:De,changedParts:e})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(e){if(e.key===De){var t=JSON.parse(e.newValue);t&&en(t.changedParts)}});var ri=self.document&&navigator.serviceWorker;ri&&ri.addEventListener("message",fu)}function fu(e){var t=e.data;t&&t.type===De&&en(t.changedParts)}x.rejectionMapper=Xa;Ti(ye,Fi);const F=new Ir("myDatabase");F.version(2.2).stores({HABIT_METADATA:`++HABIT_ID,
    HABIT_LABEL,
    QUESTION,
    DESCRIPTION,
    IS_ADDITIVE,
    HAS_OPTION,
    CAN_MULTISELECT,
    IS_TIME_ENTRY,
    Is_DURATION_ENTRY,
    DEFAULT_VALUE,
    DEFAULT_OPTION_ID,
    UNIT,
    COLOR,
    EMOJI,
    NO_OF_ENTRIES_PERDAY,
    HAS_AP`,OPTION_METADATA:`++OPTION_ID,
    HABIT_ID,
    OPTION_LABEL,
    OPTION_DESC,
    OPTION_VALUE,
    OPTION_COLOR,
    OPTION_EMOJI,
    FREQUENCY_TOTAL`,CHECKMARKS_TRACKER:`++CMT_ID,
    [HABIT_ID+DATE],
    OPTION_ID,
    CONSTANT_VALUE,
    TIME_ENTRY,
    NOTES,
    FROM_TIME,
    UPTO_TIME,
    DURATION`,HABIT_REMINDER_METADATA:`++HR_ID,
    HABIT_ID,
    FREQUENCY_NUM,
    FREQUENCY_INTERVAL,
    REMIDER_HR,
    REMIDER_MIN,
    REMIDER_DAY`,HABIT_PERFORMANCE:`++HP_ID,
    [HABIT_ID+PERIODICITY+REF_DATE],
    TARGET,
    SCORE,
    PERCENTAGE,
    MINUTES_SPEND,
    TIME_SCORE`,AP_PERFORMANCE:`++APP_ID,
    [AP_ID+PERIODICITY+REF_DATE],
    SCORE`,ADDITIONAL_PROMPT:`++AP_ID,
    HABIT_ID,
    PROMPT_LABEL,
    HAS_NUM,
    IS_NUM_ADDITIVE,
    IS_ADDED_IN_MAIN,
    IS_SUBTRACTED_IN_MAIN,
    HAS_NOTES,
    CAN_MULTISELECT,
    HAS_OPTION,
    IS_MANDATORY,
    DEFAULT_VALUE`,ADDITIONAL_PROMPT_ANSWERS:`++APA_ID,
    [AP_ID+CMT_ID],
    OPTION_ID,
    NUM_VALUE,
    NOTES`,TARGET_AND_TITLE:`++TT_ID,
    HABIT_ID,
    TITLE,
    EMOJI,
    MIN_SCORE,
    MAX_SCORE,
    TIME_PERIOD`,AP_OPT_METADATA:`++OPTION_ID,
    AP_ID,
    OPTION_LABEL,
    OPTION_DESC,
    OPTION_VALUE,
    OPTION_COLOR,
    OPTION_EMOJI,
    FREQUENCY_TOTAL`,OPTION_SCORE:`++OPT_SRC_ID,
    OPTION_ID,
    FOR_MONTH,
    FREQUENCY`,AP_OPT_SCORE:`++OPT_SRC_ID,
    OPTION_ID,
    FOR_MONTH,
    FREQUENCY`});async function qu(){return await F.ADDITIONAL_PROMPT.toArray()}async function zu(e){return await F.ADDITIONAL_PROMPT.where({HABIT_ID:e}).toArray()}async function ju(e){let t=await F.ADDITIONAL_PROMPT.where({HABIT_ID:e}).toArray();for(let n=0;n<t.length;n++){const r=t[n];r.HAS_OPTION?r.AP_OPTIONS=await F.AP_OPT_METADATA.where({AP_ID:r.AP_ID}).toArray():r.AP_OPTIONS=[]}return t}async function Wu(e){return await F.ADDITIONAL_PROMPT.add(e)}async function Vu(e){return await F.ADDITIONAL_PROMPT.put(e)}async function Uu(){return await F.ADDITIONAL_PROMPT_ANSWERS.toArray()}async function $u(e,t){return await F.ADDITIONAL_PROMPT_ANSWERS.where({AP_ID:e,CMT_ID:t}).toArray()}async function Yu(e){return await F.ADDITIONAL_PROMPT_ANSWERS.add(e)}async function Qu(e){return await F.ADDITIONAL_PROMPT_ANSWERS.put(e)}async function Xu(){return await F.AP_PERFORMANCE.toArray()}async function Ju(e,t,n){return await F.AP_PERFORMANCE.where({AP_ID:e,PERIODICITY:t,REF_DATE:n}).toArray()}async function Gu(e){return await F.AP_PERFORMANCE.add(e)}async function Zu(e){return await F.AP_PERFORMANCE.put(e)}async function es(){return await F.CHECKMARKS_TRACKER.toArray()}async function ts(e,t,n){return console.log("HABIT_ID, startdate, endDate :",e,t,n),await F.CHECKMARKS_TRACKER.where("HABIT_ID","DATE").between([e,t],[e,n],!0,!0).reverse().sortBy("DATE")}async function ns(e){return await F.CHECKMARKS_TRACKER.where({HABIT_ID:e}).count()}async function rs(e){return await F.CHECKMARKS_TRACKER.where({CMT_ID:e}).toArray()}async function is(e,t){return await F.CHECKMARKS_TRACKER.where({DATE:t,HABIT_ID:e}).toArray()}async function as(e){return await F.CHECKMARKS_TRACKER.add(e)}async function os(e){return await F.CHECKMARKS_TRACKER.put(e)}async function us(){return await F.HABIT_PERFORMANCE.toArray()}async function ss(e,t,n){return await F.HABIT_PERFORMANCE.where({HABIT_ID:e,PERIODICITY:t,REF_DATE:n}).toArray()}async function ls(e){return await F.HABIT_PERFORMANCE.add(e)}async function cs(e){return await F.HABIT_PERFORMANCE.put(e)}async function fs(){return await F.HABIT_METADATA.toArray()}async function ds(e){return console.log("Before quering HabitId :",e),await F.HABIT_METADATA.where("HABIT_ID").equals(e).toArray()}async function hs(e){return await F.HABIT_METADATA.add(e)}async function vs(e){return await F.HABIT_METADATA.put(e)}async function ps(){return await F.OPTION_METADATA.toArray()}async function ms(e){return await F.OPTION_METADATA.where({HABIT_ID:e}).toArray()}async function ys(e){return await F.OPTION_METADATA.add(e)}async function gs(e){return await F.OPTION_METADATA.put(e)}const Sr={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Or({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:r,proxy:i,emit:a}=me(),o=X(null);let u=null;function s(v){return o.value===null?!1:v===void 0||v.touches===void 0||v.touches.length<=1}const l={};n===void 0&&(Object.assign(l,{hide(v){i.hide(v)},toggle(v){i.toggle(v),v.qAnchorHandled=!0},toggleKey(v){sn(v,13)===!0&&l.toggle(v)},contextClick(v){i.hide(v),qt(v),jt(()=>{i.show(v),v.qAnchorHandled=!0})},prevent:qt,mobileTouch(v){if(l.mobileCleanup(v),s(v)!==!0)return;i.hide(v),o.value.classList.add("non-selectable");const h=v.target;Oe(l,"anchor",[[h,"touchmove","mobileCleanup","passive"],[h,"touchend","mobileCleanup","passive"],[h,"touchcancel","mobileCleanup","passive"],[o.value,"contextmenu","prevent","notPassive"]]),u=setTimeout(()=>{u=null,i.show(v),v.qAnchorHandled=!0},300)},mobileCleanup(v){o.value.classList.remove("non-selectable"),u!==null&&(clearTimeout(u),u=null),e.value===!0&&v!==void 0&&Vt()}}),n=function(v=r.contextMenu){if(r.noParentEvent===!0||o.value===null)return;let h;v===!0?i.$q.platform.is.mobile===!0?h=[[o.value,"touchstart","mobileTouch","passive"]]:h=[[o.value,"mousedown","hide","passive"],[o.value,"contextmenu","contextClick","notPassive"]]:h=[[o.value,"click","toggle","passive"],[o.value,"keyup","toggleKey","passive"]],Oe(l,"anchor",h)});function c(){Qe(l,"anchor")}function f(v){for(o.value=v;o.value.classList.contains("q-anchor--skip");)o.value=o.value.parentNode;n()}function d(){if(r.target===!1||r.target===""||i.$el.parentNode===null)o.value=null;else if(r.target===!0)f(i.$el.parentNode);else{let v=r.target;if(typeof r.target=="string")try{v=document.querySelector(r.target)}catch{v=void 0}v!=null?(o.value=v.$el||v,n()):(o.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return le(()=>r.contextMenu,v=>{o.value!==null&&(c(),n(v))}),le(()=>r.target,()=>{o.value!==null&&c(),d()}),le(()=>r.noParentEvent,v=>{o.value!==null&&(v===!0?c():n())}),ci(()=>{d(),t!==!0&&r.modelValue===!0&&o.value===null&&a("update:modelValue",!1)}),Ae(()=>{u!==null&&clearTimeout(u),c()}),{anchorEl:o,canShow:s,anchorEvents:l}}function Yi(e,t){const n=X(null);let r;function i(u,s){const l=`${s!==void 0?"add":"remove"}EventListener`,c=s!==void 0?s:r;u!==window&&u[l]("scroll",c,he.passive),window[l]("scroll",c,he.passive),r=s}function a(){n.value!==null&&(i(n.value),n.value=null)}const o=le(()=>e.noParentEvent,()=>{n.value!==null&&(a(),t())});return Ae(o),{localScrollTarget:n,unconfigureScrollTarget:a,changeScrollEvent:i}}const Je=[];function du(e){return Je.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Qi(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return Mt(e)}else if(e.__qPortal===!0){const n=Mt(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=Mt(e)}while(e!=null)}function hu(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=Qi(e,t);continue}e.hide(t)}e=Mt(e)}}const vu=pe({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function pu(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Dr(e,t,n,r){const i=X(!1),a=X(!1);let o=null;const u={},s=r==="dialog"&&pu(e);function l(f){if(f===!0){Nr(u),a.value=!0;return}a.value=!1,i.value===!1&&(s===!1&&o===null&&(o=va(!1,r)),i.value=!0,Je.push(e.proxy),xa(u))}function c(f){if(a.value=!1,f!==!0)return;Nr(u),i.value=!1;const d=Je.indexOf(e.proxy);d!==-1&&Je.splice(d,1),o!==null&&(pa(o),o=null)}return da(()=>{c(!0)}),e.proxy.__qPortal=!0,hi(e.proxy,"contentEl",()=>t.value),{showPortal:l,hidePortal:c,portalIsActive:i,portalIsAccessible:a,renderPortal:()=>s===!0?n():i.value===!0?[Z(ha,{to:o},Z(vu,n))]:void 0}}const Pr={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function kr(e,t=()=>{},n=()=>{}){return{transitionProps:N(()=>{const r=`q-transition--${e.transitionShow||t()}`,i=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:N(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function Rr(){let e;const t=me();function n(){e=void 0}return fi(n),Ae(n),{removeTick:n,registerTick(r){e=r,jt(()=>{e===r&&(di(t)===!1&&e(),e=void 0)})}}}const He=[];let Ze;function mu(e){Ze=e.keyCode===27}function yu(){Ze===!0&&(Ze=!1)}function gu(e){Ze===!0&&(Ze=!1,sn(e,27)===!0&&He[He.length-1](e))}function Xi(e){window[e]("keydown",mu),window[e]("blur",yu),window[e]("keyup",gu),Ze=!1}function Ji(e){se.is.desktop===!0&&(He.push(e),He.length===1&&Xi("addEventListener"))}function tn(e){const t=He.indexOf(e);t!==-1&&(He.splice(t,1),He.length===0&&Xi("removeEventListener"))}const qe=[];function Gi(e){qe[qe.length-1](e)}function Zi(e){se.is.desktop===!0&&(qe.push(e),qe.length===1&&document.body.addEventListener("focusin",Gi))}function nr(e){const t=qe.indexOf(e);t!==-1&&(qe.splice(t,1),qe.length===0&&document.body.removeEventListener("focusin",Gi))}const{notPassiveCapture:nn}=he,ze=[];function rn(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=Je.length-1;for(;n>=0;){const r=Je[n].$;if(r.type.name==="QTooltip"){n--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;n--}for(let r=ze.length-1;r>=0;r--){const i=ze[r];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function ea(e){ze.push(e),ze.length===1&&(document.addEventListener("mousedown",rn,nn),document.addEventListener("touchstart",rn,nn))}function an(e){const t=ze.findIndex(n=>n===e);t!==-1&&(ze.splice(t,1),ze.length===0&&(document.removeEventListener("mousedown",rn,nn),document.removeEventListener("touchstart",rn,nn)))}let ii,ai;function on(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function ta(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const rr={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{rr[`${e}#ltr`]=e,rr[`${e}#rtl`]=e});function un(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:rr[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function _u(e,t){let{top:n,left:r,right:i,bottom:a,width:o,height:u}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],r-=t[0],a+=t[1],i+=t[0],o+=t[0],u+=t[1]),{top:n,bottom:a,height:u,left:r,right:i,width:o,middle:r+(i-r)/2,center:n+(a-n)/2}}function bu(e,t,n){let{top:r,left:i}=e.getBoundingClientRect();return r+=t.top,i+=t.left,n!==void 0&&(r+=n[1],i+=n[0]),{top:r,bottom:r+1,height:1,left:i,right:i+1,width:1,middle:i,center:r}}function wu(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function oi(e,t,n,r){return{top:e[n.vertical]-t[r.vertical],left:e[n.horizontal]-t[r.horizontal]}}function Mr(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Mr(e,t+1)},10);return}const{targetEl:n,offset:r,anchorEl:i,anchorOrigin:a,selfOrigin:o,absoluteOffset:u,fit:s,cover:l,maxHeight:c,maxWidth:f}=e;if(se.is.ios===!0&&window.visualViewport!==void 0){const E=document.body.style,{offsetLeft:T,offsetTop:A}=window.visualViewport;T!==ii&&(E.setProperty("--q-pe-left",T+"px"),ii=T),A!==ai&&(E.setProperty("--q-pe-top",A+"px"),ai=A)}const{scrollLeft:d,scrollTop:v}=n,h=u===void 0?_u(i,l===!0?[0,0]:r):bu(i,u,r);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:f||"100vw",maxHeight:c||"100vh",visibility:"visible"});const{offsetWidth:p,offsetHeight:g}=n,{elWidth:w,elHeight:_}=s===!0||l===!0?{elWidth:Math.max(h.width,p),elHeight:l===!0?Math.max(h.height,g):g}:{elWidth:p,elHeight:g};let y={maxWidth:f,maxHeight:c};(s===!0||l===!0)&&(y.minWidth=h.width+"px",l===!0&&(y.minHeight=h.height+"px")),Object.assign(n.style,y);const b=wu(w,_);let m=oi(h,b,a,o);if(u===void 0||r===void 0)On(m,h,b,a,o);else{const{top:E,left:T}=m;On(m,h,b,a,o);let A=!1;if(m.top!==E){A=!0;const C=2*r[1];h.center=h.top-=C,h.bottom-=C+2}if(m.left!==T){A=!0;const C=2*r[0];h.middle=h.left-=C,h.right-=C+2}A===!0&&(m=oi(h,b,a,o),On(m,h,b,a,o))}y={top:m.top+"px",left:m.left+"px"},m.maxHeight!==void 0&&(y.maxHeight=m.maxHeight+"px",h.height>m.maxHeight&&(y.minHeight=y.maxHeight)),m.maxWidth!==void 0&&(y.maxWidth=m.maxWidth+"px",h.width>m.maxWidth&&(y.minWidth=y.maxWidth)),Object.assign(n.style,y),n.scrollTop!==v&&(n.scrollTop=v),n.scrollLeft!==d&&(n.scrollLeft=d)}function On(e,t,n,r,i){const a=n.bottom,o=n.right,u=Ta(),s=window.innerHeight-u,l=document.body.clientWidth;if(e.top<0||e.top+a>s)if(i.vertical==="center")e.top=t[r.vertical]>s/2?Math.max(0,s-a):0,e.maxHeight=Math.min(a,s);else if(t[r.vertical]>s/2){const c=Math.min(s,r.vertical==="center"?t.center:r.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,c),e.top=Math.max(0,c-a)}else e.top=Math.max(0,r.vertical==="center"?t.center:r.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,s-e.top);if(e.left<0||e.left+o>l)if(e.maxWidth=Math.min(o,l),i.horizontal==="middle")e.left=t[r.horizontal]>l/2?Math.max(0,l-o):0;else if(t[r.horizontal]>l/2){const c=Math.min(l,r.horizontal==="middle"?t.middle:r.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(o,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,r.horizontal==="middle"?t.middle:r.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(o,l-e.left)}var Eu=pe({name:"QMenu",inheritAttrs:!1,props:{...Sr,...ur,...ir,...Pr,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:on},self:{type:String,validator:on},offset:{type:Array,validator:ta},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...sr,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:r}){let i=null,a,o,u;const s=me(),{proxy:l}=s,{$q:c}=l,f=X(null),d=X(!1),v=N(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),h=ar(e,c),{registerTick:p,removeTick:g}=Rr(),{registerTimeout:w}=cr(),{transitionProps:_,transitionStyle:y}=kr(e),{localScrollTarget:b,changeScrollEvent:m,unconfigureScrollTarget:E}=Yi(e,H),{anchorEl:T,canShow:A}=Or({showing:d}),{hide:C}=lr({showing:d,canShow:A,handleShow:Q,handleHide:re,hideOnRouteChange:v,processOnMount:!0}),{showPortal:S,hidePortal:M,renderPortal:B}=Dr(s,f,Ce,"menu"),k={anchorEl:T,innerRef:f,onClickOutside(R){if(e.persistent!==!0&&d.value===!0)return C(R),(R.type==="touchstart"||R.target.classList.contains("q-dialog__backdrop"))&&_t(R),!0}},j=N(()=>un(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),O=N(()=>e.cover===!0?j.value:un(e.self||"top start",c.lang.rtl)),W=N(()=>(e.square===!0?" q-menu--square":"")+(h.value===!0?" q-menu--dark q-dark":"")),U=N(()=>e.autoClose===!0?{onClick:$}:{}),ee=N(()=>d.value===!0&&e.persistent!==!0);le(ee,R=>{R===!0?(Ji(P),ea(k)):(tn(P),an(k))});function Y(){mi(()=>{let R=f.value;R&&R.contains(document.activeElement)!==!0&&(R=R.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||R.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||R.querySelector("[autofocus], [data-autofocus]")||R,R.focus({preventScroll:!0}))})}function Q(R){if(i=e.noRefocus===!1?document.activeElement:null,Zi(ne),S(),H(),a=void 0,R!==void 0&&(e.touchPosition||e.contextMenu)){const Me=zt(R);if(Me.left!==void 0){const{top:na,left:ra}=T.value.getBoundingClientRect();a={left:Me.left-ra,top:Me.top-na}}}o===void 0&&(o=le(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,V)),e.noFocus!==!0&&document.activeElement.blur(),p(()=>{V(),e.noFocus!==!0&&Y()}),w(()=>{c.platform.is.ios===!0&&(u=e.autoClose,f.value.click()),V(),S(!0),n("show",R)},e.transitionDuration)}function re(R){g(),M(),te(!0),i!==null&&(R===void 0||R.qClickOutside!==!0)&&(((R&&R.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),w(()=>{M(!0),n("hide",R)},e.transitionDuration)}function te(R){a=void 0,o!==void 0&&(o(),o=void 0),(R===!0||d.value===!0)&&(nr(ne),E(),an(k),tn(P)),R!==!0&&(i=null)}function H(){(T.value!==null||e.scrollTarget!==void 0)&&(b.value=pi(T.value,e.scrollTarget),m(b.value,V))}function $(R){u!==!0?(Qi(l,R),n("click",R)):u=!1}function ne(R){ee.value===!0&&e.noFocus!==!0&&vi(f.value,R.target)!==!0&&Y()}function P(R){n("escapeKey"),C(R)}function V(){Mr({targetEl:f.value,offset:e.offset,anchorEl:T.value,anchorOrigin:j.value,selfOrigin:O.value,absoluteOffset:a,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Ce(){return Z(Wt,_.value,()=>d.value===!0?Z("div",{role:"menu",...r,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+W.value,r.class],style:[r.style,y.value],...U.value},gt(t.default)):null)}return Ae(te),Object.assign(l,{focus:Y,updatePosition:V}),B}}),_s=pe({name:"QTooltip",inheritAttrs:!1,props:{...Sr,...ur,...Pr,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:on},self:{type:String,default:"top middle",validator:on},offset:{type:Array,default:()=>[14,14],validator:ta},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...sr],setup(e,{slots:t,emit:n,attrs:r}){let i,a;const o=me(),{proxy:{$q:u}}=o,s=X(null),l=X(!1),c=N(()=>un(e.anchor,u.lang.rtl)),f=N(()=>un(e.self,u.lang.rtl)),d=N(()=>e.persistent!==!0),{registerTick:v,removeTick:h}=Rr(),{registerTimeout:p}=cr(),{transitionProps:g,transitionStyle:w}=kr(e),{localScrollTarget:_,changeScrollEvent:y,unconfigureScrollTarget:b}=Yi(e,Q),{anchorEl:m,canShow:E,anchorEvents:T}=Or({showing:l,configureAnchorEl:Y}),{show:A,hide:C}=lr({showing:l,canShow:E,handleShow:k,handleHide:j,hideOnRouteChange:d,processOnMount:!0});Object.assign(T,{delayShow:U,delayHide:ee});const{showPortal:S,hidePortal:M,renderPortal:B}=Dr(o,s,te,"tooltip");if(u.platform.is.mobile===!0){const H={anchorEl:m,innerRef:s,onClickOutside(ne){return C(ne),ne.target.classList.contains("q-dialog__backdrop")&&_t(ne),!0}},$=N(()=>e.modelValue===null&&e.persistent!==!0&&l.value===!0);le($,ne=>{(ne===!0?ea:an)(H)}),Ae(()=>{an(H)})}function k(H){S(),v(()=>{a=new MutationObserver(()=>W()),a.observe(s.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),W(),Q()}),i===void 0&&(i=le(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,W)),p(()=>{S(!0),n("show",H)},e.transitionDuration)}function j(H){h(),M(),O(),p(()=>{M(!0),n("hide",H)},e.transitionDuration)}function O(){a!==void 0&&(a.disconnect(),a=void 0),i!==void 0&&(i(),i=void 0),b(),Qe(T,"tooltipTemp")}function W(){Mr({targetEl:s.value,offset:e.offset,anchorEl:m.value,anchorOrigin:c.value,selfOrigin:f.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function U(H){if(u.platform.is.mobile===!0){Vt(),document.body.classList.add("non-selectable");const $=m.value,ne=["touchmove","touchcancel","touchend","click"].map(P=>[$,P,"delayHide","passiveCapture"]);Oe(T,"tooltipTemp",ne)}p(()=>{A(H)},e.delay)}function ee(H){u.platform.is.mobile===!0&&(Qe(T,"tooltipTemp"),Vt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),p(()=>{C(H)},e.hideDelay)}function Y(){if(e.noParentEvent===!0||m.value===null)return;const H=u.platform.is.mobile===!0?[[m.value,"touchstart","delayShow","passive"]]:[[m.value,"mouseenter","delayShow","passive"],[m.value,"mouseleave","delayHide","passive"]];Oe(T,"anchor",H)}function Q(){if(m.value!==null||e.scrollTarget!==void 0){_.value=pi(m.value,e.scrollTarget);const H=e.noParentEvent===!0?W:C;y(_.value,H)}}function re(){return l.value===!0?Z("div",{...r,ref:s,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,w.value],role:"tooltip"},gt(t.default)):null}function te(){return Z(Wt,g.value,re)}return Ae(O),Object.assign(o.proxy,{updatePosition:W}),B}});function bs(){let e=Object.create(null);return{getCache:(t,n)=>e[t]===void 0?e[t]=typeof n=="function"?n():n:e[t],setCache(t,n){e[t]=n},hasCache(t){return e.hasOwnProperty(t)},clearCache(t){t!==void 0?delete e[t]:e={}}}}let Rt=0;const Au={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},ui={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Tu=pe({name:"QDialog",inheritAttrs:!1,props:{...ur,...Pr,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...sr,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:r}){const i=me(),a=X(null),o=X(!1),u=X(!1);let s=null,l=null,c,f;const d=N(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:v}=Ka(),{registerTimeout:h}=cr(),{registerTick:p,removeTick:g}=Rr(),{transitionProps:w,transitionStyle:_}=kr(e,()=>ui[e.position][0],()=>ui[e.position][1]),y=N(()=>_.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:b,hidePortal:m,portalIsAccessible:E,renderPortal:T}=Dr(i,a,ne,"dialog"),{hide:A}=lr({showing:o,hideOnRouteChange:d,handleShow:O,handleHide:W,processOnMount:!0}),{addToHistory:C,removeFromHistory:S}=ka(o,A,d),M=N(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Au[e.position]}`+(u.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),B=N(()=>o.value===!0&&e.seamless!==!0),k=N(()=>e.autoClose===!0?{onClick:te}:{}),j=N(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${B.value===!0?"modal":"seamless"}`,r.class]);le(()=>e.maximized,P=>{o.value===!0&&re(P)}),le(B,P=>{v(P),P===!0?(Zi($),Ji(Y)):(nr($),tn(Y))});function O(P){C(),l=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,re(e.maximized),b(),u.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),p(U)):g(),h(()=>{if(i.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:V,bottom:Ce}=document.activeElement.getBoundingClientRect(),{innerHeight:R}=window,Me=window.visualViewport!==void 0?window.visualViewport.height:R;V>0&&Ce>Me/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Me,Ce>=R?1/0:Math.ceil(document.scrollingElement.scrollTop+Ce-Me/2))),document.activeElement.scrollIntoView()}f=!0,a.value.click(),f=!1}b(!0),u.value=!1,n("show",P)},e.transitionDuration)}function W(P){g(),S(),Q(!0),u.value=!0,m(),l!==null&&(((P&&P.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),h(()=>{m(!0),u.value=!1,n("hide",P)},e.transitionDuration)}function U(P){mi(()=>{let V=a.value;if(V!==null){if(P!==void 0){const Ce=V.querySelector(P);if(Ce!==null){Ce.focus({preventScroll:!0});return}}V.contains(document.activeElement)!==!0&&(V=V.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||V.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||V.querySelector("[autofocus], [data-autofocus]")||V,V.focus({preventScroll:!0}))}})}function ee(P){P&&typeof P.focus=="function"?P.focus({preventScroll:!0}):U(),n("shake");const V=a.value;V!==null&&(V.classList.remove("q-animate--scale"),V.classList.add("q-animate--scale"),s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,a.value!==null&&(V.classList.remove("q-animate--scale"),U())},170))}function Y(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&ee():(n("escapeKey"),A()))}function Q(P){s!==null&&(clearTimeout(s),s=null),(P===!0||o.value===!0)&&(re(!1),e.seamless!==!0&&(v(!1),nr($),tn(Y))),P!==!0&&(l=null)}function re(P){P===!0?c!==!0&&(Rt<1&&document.body.classList.add("q-body--dialog"),Rt++,c=!0):c===!0&&(Rt<2&&document.body.classList.remove("q-body--dialog"),Rt--,c=!1)}function te(P){f!==!0&&(A(P),n("click",P))}function H(P){e.persistent!==!0&&e.noBackdropDismiss!==!0?A(P):e.noShake!==!0&&ee()}function $(P){e.allowFocusOutside!==!0&&E.value===!0&&vi(a.value,P.target)!==!0&&U('[tabindex]:not([tabindex="-1"])')}Object.assign(i.proxy,{focus:U,shake:ee,__updateRefocusTarget(P){l=P||null}}),Ae(Q);function ne(){return Z("div",{role:"dialog","aria-modal":B.value===!0?"true":"false",...r,class:j.value},[Z(Wt,{name:"q-transition--fade",appear:!0},()=>B.value===!0?Z("div",{class:"q-dialog__backdrop fixed-full",style:y.value,"aria-hidden":"true",tabindex:-1,onClick:H}):null),Z(Wt,w.value,()=>o.value===!0?Z("div",{ref:a,class:M.value,style:_.value,tabindex:-1,...k.value},gt(t.default)):null)])}return T}}),ws=pe({name:"QPopupProxy",props:{...Sr,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:n,attrs:r}){const{proxy:i}=me(),{$q:a}=i,o=X(!1),u=X(null),s=N(()=>parseInt(e.breakpoint,10)),{canShow:l}=Or({showing:o});function c(){return a.screen.width<s.value||a.screen.height<s.value?"dialog":"menu"}const f=X(c()),d=N(()=>f.value==="menu"?{maxHeight:"99vh"}:{});le(()=>c(),p=>{o.value!==!0&&(f.value=p)});function v(p){o.value=!0,n("show",p)}function h(p){o.value=!1,f.value=c(),n("hide",p)}return Object.assign(i,{show(p){l(p)===!0&&u.value.show(p)},hide(p){u.value.hide(p)},toggle(p){u.value.toggle(p)}}),hi(i,"currentComponent",()=>({type:f.value,ref:u.value})),()=>{const p={ref:u,...d.value,...r,onShow:v,onHide:h};let g;return f.value==="dialog"?g=Tu:(g=Eu,Object.assign(p,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),Z(g,p,t.default)}}});function si(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Es=li({name:"close-popup",beforeMount(e,{value:t}){const n={depth:si(t),handler(r){n.depth!==0&&setTimeout(()=>{const i=du(e);i!==void 0&&hu(i,r,n.depth)})},handlerKey(r){sn(r,13)===!0&&n.handler(r)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=si(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const Dn=/^[a-z0-9]+(-[a-z0-9]+)*$/,xu=(e,t,n,r="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const u=i.pop(),s=i.pop(),l={provider:i.length>0?i[0]:r,prefix:s,name:u};return t&&!Pn(l)?null:l}const a=i[0],o=a.split("-");if(o.length>1){const u={provider:r,prefix:o.shift(),name:o.join("-")};return t&&!Pn(u)?null:u}if(n&&r===""){const u={provider:r,prefix:"",name:a};return t&&!Pn(u,n)?null:u}return null},Pn=(e,t)=>e?!!((e.provider===""||e.provider.match(Dn))&&(t&&e.prefix===""||e.prefix.match(Dn))&&e.name.match(Dn)):!1,As={__name:"MyAvatar",props:["BGCOLOR","EMOJI","SIZE","isRounded"],setup(e){const t=e,n=X(!1),r=X(45),i=X(20),a=X(24),o=N(()=>t==null?void 0:t.EMOJI);function u(){switch(t==null?void 0:t.SIZE){case"xl":r.value=100,a.value=70,i.value=63-4*(t==null?void 0:t.EMOJI.length);break;case"lg":r.value=75,a.value=50,i.value=52-4*(t==null?void 0:t.EMOJI.length);break;case"md":r.value=60,a.value=37,(t==null?void 0:t.EMOJI.length)<5?i.value=40-2*(t==null?void 0:t.EMOJI.length):(t==null?void 0:t.EMOJI.length)<=12?i.value=40-1*(t==null?void 0:t.EMOJI.length):i.value=36-1*(t==null?void 0:t.EMOJI.length);break;case"sm":r.value=40,a.value=26,i.value=30-1*(t==null?void 0:t.EMOJI.length);break;case"xs":r.value=30,a.value=20,i.value=16-1*(t==null?void 0:t.EMOJI.length);break;default:r.value=45,a.value=26,i.value=20-1*(t==null?void 0:t.EMOJI.length);break}i.value<12&&(i.value=12)}le(o,(l,c)=>{console.log("Watching"),console.log("Watch props.selected function called with args:",l,c),s(),u()});function s(){xu(t==null?void 0:t.EMOJI)?n.value=!0:n.value=!1}return s(),u(),(l,c)=>(pn(),Kr(ba,{rounded:t==null?void 0:t.isRounded,style:mn({backgroundColor:t==null?void 0:t.BGCOLOR}),"text-color":"white",size:`${r.value}px`},{default:ma(()=>[n.value?(pn(),Kr(ya(Ca),{key:0,icon:t==null?void 0:t.EMOJI,style:mn({fontSize:`${a.value}px`})},null,8,["icon","style"])):(pn(),ga("span",{key:1,style:mn({fontSize:`${i.value}px`,whiteSpace:"pre-line",textAlign:"center"})},_a(t==null?void 0:t.EMOJI),5))]),_:1},8,["rounded","style","size"]))}};let Cu=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Cu=e.scrollLeft>=0,e.remove()}export{Qu as $,gs as A,ys as B,Es as C,Vu as D,Wu as E,ds as F,ju as G,Rr as H,Cu as I,ts as J,Mu as K,is as L,Fr as M,Lr as N,Vt as O,$u as P,_s as Q,ss as R,Ju as S,Nu as T,cs as U,ls as V,Zu as W,Gu as X,os as Y,as as Z,As as _,sr as a,Yu as a0,Ku as a1,Tu as a2,xu as a3,Lu as a4,ns as a5,rs as a6,cr as b,lr as c,ka as d,Fu as e,Ka as f,ws as g,Eu as h,Bu as i,Ru as j,ku as k,ms as l,zu as m,bs as n,F as o,Hu as p,qu as q,fs as r,Uu as s,Xu as t,ur as u,es as v,us as w,ps as x,vs as y,hs as z};
