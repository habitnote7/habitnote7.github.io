import{_ as q,Q as x,a as W,b as L,c as j}from"./OptionSelecter2.2006bd27.js";import{r as G,C as T,D as _,E as A,J as y,f as n,G as d,P as R,O as C,F as Q,aH as J,aP as K,aQ as Z,H as s,I as k,aq as X,o as ee,c as te,M as g,K as ie,an as se}from"./index.be3bd688.js";import{I as V}from"./iconify.00d495d3.js";import{P as z,Q as w,R as v,S as U,U as ae,V as le,W as oe,X as ne,Y as Ie,Z as Ee,$ as re,a0 as me,a1 as de,i as Te,j as B,_ as he,K as F,k as _e,a2 as Ae}from"./rtl.c4baed12.js";import{Q as M}from"./QInput.82cd52d4.js";import{h,a as ce}from"./moment.87cdb430.js";import{Q as Oe}from"./QCard.75c1762d.js";import{u as De}from"./use-quasar.8d2f2e0f.js";import"./QTime.e556c071.js";const Se={class:"q-mt-sm"},ue={class:"col-12 row no-wrap justify-between content-center"},Pe={class:"self-end"},Ce={class:"text-grey-7 text-weight-medium"},ye={key:0},Ne={key:1},Me={class:"col-12",style:{"white-space":"pre-line"}},Re={__name:"OneAPEntryDetail2",props:["apDetail","CMT_ID"],emits:["goToEdit"],setup(e,{emit:l}){const t=e,E=l,o=G(null);async function r(){var I,O,D,S;if(console.log("Form One AP EntryDetail 2 : myProps?.apDetail?.AP_ID",(I=t==null?void 0:t.apDetail)==null?void 0:I.AP_ID),console.log("Form One AP EntryDetail 2 : myProps?.CMT_ID",t==null?void 0:t.CMT_ID),((O=t==null?void 0:t.apDetail)==null?void 0:O.AP_ID)&&(t==null?void 0:t.CMT_ID)){const m=await z((D=t==null?void 0:t.apDetail)==null?void 0:D.AP_ID,t==null?void 0:t.CMT_ID);m.length>0&&(m[0].OPTION_ID&&(m[0].OPTION_DETAILS=(S=t==null?void 0:t.apDetail)==null?void 0:S.AP_OPTIONS.find(u=>u.OPTION_ID==m[0].OPTION_ID)),o.value=m[0])}}return r(),(I,O)=>{var D,S,m,u,f,a,i,N,c,P,p,b,Y;return T(),_("div",Se,[A("div",ue,[A("div",Pe,[A("span",Ce,y((D=e.apDetail)==null?void 0:D.PROMPT_LABEL),1)]),A("div",{class:"self-end",align:"right",onClick:O[0]||(O[0]=H=>E("goToEdit"))},[(S=o.value)!=null&&S.OPTION_DETAILS?(T(),_("span",ye,[n(q,{BGCOLOR:(u=(m=o.value)==null?void 0:m.OPTION_DETAILS)==null?void 0:u.OPTION_COLOR,EMOJI:(a=(f=o.value)==null?void 0:f.OPTION_DETAILS)==null?void 0:a.OPTION_EMOJI,SCORE:(N=(i=o.value)==null?void 0:i.OPTION_DETAILS)==null?void 0:N.OPTION_VALUE,LABEL:(P=(c=o.value)==null?void 0:c.OPTION_DETAILS)==null?void 0:P.OPTION_LABEL},null,8,["BGCOLOR","EMOJI","SCORE","LABEL"])])):((p=e.apDetail)==null?void 0:p.HAS_NUM)&&((b=o.value)==null?void 0:b.NUM_VALUE)?(T(),_("span",Ne,[n(x,{outline:""},{default:d(()=>{var H;return[R(y((H=o.value)==null?void 0:H.NUM_VALUE),1)]}),_:1})])):C("",!0)])]),A("div",Me,y((Y=o.value)==null?void 0:Y.NOTES),1)])}}},fe={class:"full-width"},ke={class:"col-12 row no-wrap justify-between content-center"},ve={class:"self-end"},Ue={key:0},we={key:1},ge={class:"col-12",style:{"white-space":"pre-line"}},lt={__name:"OneCMEntryDetail2",props:["habitDetails","checkmark"],emits:["goToEdit"],setup(e,{emit:l}){const t=l;return(E,o)=>{var r,I,O,D,S,m,u,f,a,i,N,c;return T(),_("div",fe,[A("div",ke,[A("div",ve,[A("span",{class:"text-grey-6 text-weight-medium",onClick:o[0]||(o[0]=P=>t("goToEdit"))},y((r=e.habitDetails)==null?void 0:r.QUESTION),1)]),A("div",{class:"self-end",align:"right",onClick:o[1]||(o[1]=P=>t("goToEdit"))},[(I=e.checkmark)!=null&&I.OPTION_DETAILS?(T(),_("span",Ue,[n(q,{BGCOLOR:(D=(O=e.checkmark)==null?void 0:O.OPTION_DETAILS)==null?void 0:D.OPTION_COLOR,EMOJI:(m=(S=e.checkmark)==null?void 0:S.OPTION_DETAILS)==null?void 0:m.OPTION_EMOJI,SCORE:(f=(u=e.checkmark)==null?void 0:u.OPTION_DETAILS)==null?void 0:f.OPTION_VALUE,LABEL:(i=(a=e.checkmark)==null?void 0:a.OPTION_DETAILS)==null?void 0:i.OPTION_LABEL},null,8,["BGCOLOR","EMOJI","SCORE","LABEL"])])):(N=e.checkmark)!=null&&N.CONSTANT_VALUE?(T(),_("span",we,[n(x,{outline:""},{default:d(()=>{var P;return[R(y((P=e.checkmark)==null?void 0:P.CONSTANT_VALUE),1)]}),_:1})])):C("",!0)])]),A("div",ge,y(e.checkmark.NOTES),1),(T(!0),_(Q,null,J((c=e.habitDetails)==null?void 0:c.apDetails,P=>(T(),_("div",{key:P.AP_ID},[n(Re,{apDetail:P,CMT_ID:e.checkmark.CMT_ID,onGoToEdit:o[2]||(o[2]=p=>t("goToEdit"))},null,8,["apDetail","CMT_ID"])]))),128))])}}},pe={class:"row q-my-sm items-center"},He={class:"col-12"},be={class:"col-3",align:"right"},Ye=A("span",null,"Minus One value",-1),Le={class:"col-6"},Ve={class:"col-3"},Be=A("span",null,"Plus One Value",-1),$={__name:"NumStepperInput",props:K(["label"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=e,t=Z(e,"modelValue");return(E,o)=>(T(),_("div",pe,[A("div",He,y(l.label),1),A("div",be,[n(k,{size:"md",color:"red",onClick:o[0]||(o[0]=r=>t.value--)},{default:d(()=>[n(s(V),{icon:"ph:minus-bold",style:{"font-size":"24px"}}),n(w,null,{default:d(()=>[Ye]),_:1})]),_:1})]),A("div",Le,[n(M,{filled:"",dense:"",type:"number",modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=r=>t.value=r)},null,8,["modelValue"])]),A("div",Ve,[n(k,{size:"md",color:"teal",onClick:o[2]||(o[2]=r=>t.value++)},{default:d(()=>[n(s(V),{icon:"ph:plus-bold",style:{"font-size":"24px"}}),n(w,null,{default:d(()=>[Be]),_:1})]),_:1})])]))}},Fe=X("addCheckMarkStore",{state:()=>({addCMDailog:!1,CMT_ID:0,forHabitId:0,forDate:"",habitDetails:null,optionDetails:[],additionalPromptDetails:[],mainCheckEditedItem:{CMT_ID:0,HABIT_ID:0,DATE:"",OPTION_ID:0,OPTION_OBJECT:null,OLD_CONSTANT_VALUE:0,CONSTANT_VALUE:0,TIME_ENTRY:h().format("YYYY-MM-DDTHH:mm"),NOTES:"",FROM_TIME:h().format("YYYY-MM-DDTHH:mm"),UPTO_TIME:h().format("YYYY-MM-DDTHH:mm"),DURATION:0},temp_ApOption_Obj:null,endOfWeek:"",monthofDate:"",endOfQuater:"",yearofDate:"",dailyScoreItem:{HP_ID:0,PERIODICITY:"Daily",HABIT_ID:0,REF_DATE:"",TARGET:0,SCORE:0,PERCENTAGE:0,MINUTES_SPEND:0,TIME_SCORE:0},weeklyScoreItem:{HP_ID:0,HABIT_ID:0,PERIODICITY:"Weekly",REF_DATE:"",TARGET:0,SCORE:0,PERCENTAGE:0,MINUTES_SPEND:0,TIME_SCORE:0},monthlyScoreItem:{HP_ID:0,HABIT_ID:0,PERIODICITY:"Monthly",REF_DATE:"",TARGET:0,SCORE:0,PERCENTAGE:0,MINUTES_SPEND:0,TIME_SCORE:0},quaterlyScoreItem:{HP_ID:0,HABIT_ID:0,PERIODICITY:"Quaterly",REF_DATE:"",TARGET:0,SCORE:0,PERCENTAGE:0,MINUTES_SPEND:0,TIME_SCORE:0},yearlyScoreItem:{HP_ID:0,HABIT_ID:0,PERIODICITY:"Yearly",REF_DATE:"",TARGET:0,SCORE:0,PERCENTAGE:0,MINUTES_SPEND:0,TIME_SCORE:0}}),actions:{resetCMStore(){this.addCMDailog=!1},async openCheckMarkDailog(e){var t,E;console.log("recievedData",e),this.forDate=e.forDate,this.forHabitId=e.habitDetails.HABIT_ID,this.habitDetails=e.habitDetails,this.optionDetails=Object.assign([],(t=e.habitDetails)==null?void 0:t.optionDetails);const l=Object.assign([],(E=e.habitDetails)==null?void 0:E.apDetails);this.additionalPromptDetails=[],e.CMT_ID?(this.CMT_ID=e.CMT_ID,this.mainCheckEditedItem=Object.assign({},e.CMDetails)):(this.mainCheckEditedItem.HABIT_ID=this.forHabitId,this.mainCheckEditedItem.DATE=this.forDate);for(let o=0;o<l.length;o++){let r=l[o],I=[];this.CMT_ID&&(I=await z(r.AP_ID,this.CMT_ID)),I.length>0?(r.APAnswer=I[0],r.APAnswer.OPTION_OBJECT=null,r.APAnswer.OLD_NUM_VALUE=I[0].NUM_VALUE):r.APAnswer={APA_ID:0,AP_ID:r.AP_ID,CMT_ID:0,OPTION_OBJECT:null,OLD_NUM_VALUE:0,OPTION_ID:0,NUM_VALUE:0,NOTES:""},r.dailyAPScore=null,r.weeklyAPScore=null,r.monthlyAPScore=null,r.quaterlyAPScore=null,r.yearlyAPScore=null,this.additionalPromptDetails.push(r)}this.getScoreValues(),this.addCMDailog=!0},async getScoreValues(){this.endOfWeek=h(this.forDate).endOf("week").format("YYYY-MM-DD"),this.monthofDate=h(this.forDate).format("YYYY-MM"),this.endOfQuater=h(this.forDate).endOf("quarter").format("YYYY-MM-DD"),this.yearofDate=h(this.forDate).format("YYYY"),this.dailyScoreItem.HABIT_ID=this.forHabitId,this.dailyScoreItem.REF_DATE=this.forDate,this.weeklyScoreItem.HABIT_ID=this.forHabitId,this.weeklyScoreItem.REF_DATE=this.endOfWeek,this.monthlyScoreItem.HABIT_ID=this.forHabitId,this.monthlyScoreItem.REF_DATE=this.monthofDate,this.quaterlyScoreItem.HABIT_ID=this.forHabitId,this.quaterlyScoreItem.REF_DATE=this.endOfQuater,this.yearlyScoreItem.HABIT_ID=this.forHabitId,this.yearlyScoreItem.REF_DATE=this.yearofDate,console.log("getScoreValues");const e=await v(this.forHabitId,"Daily",this.forDate),l=await v(this.forHabitId,"Weekly",this.endOfWeek),t=await v(this.forHabitId,"Monthly",this.monthofDate),E=await v(this.forHabitId,"Quaterly",this.endOfQuater),o=await v(this.forHabitId,"Yearly",this.yearofDate);console.log("getScoreValues result1 :",e),e.length>0&&(this.dailyScoreItem.HP_ID=e[0].HP_ID,this.dailyScoreItem.HABIT_ID=e[0].HABIT_ID,this.dailyScoreItem.PERIODICITY=e[0].PERIODICITY,this.dailyScoreItem.REF_DATE=e[0].REF_DATE,this.dailyScoreItem.TARGET=e[0].TARGET,this.dailyScoreItem.SCORE=e[0].SCORE,this.dailyScoreItem.PERCENTAGE=e[0].PERCENTAGE,this.dailyScoreItem.MINUTES_SPEND=e[0].MINUTES_SPEND,this.dailyScoreItem.TIME_SCORE=e[0].TIME_SCORE),l.length>0&&(this.weeklyScoreItem.HP_ID=l[0].HP_ID,this.weeklyScoreItem.HABIT_ID=l[0].HABIT_ID,this.weeklyScoreItem.PERIODICITY=l[0].PERIODICITY,this.weeklyScoreItem.REF_DATE=l[0].REF_DATE,this.weeklyScoreItem.TARGET=l[0].TARGET,this.weeklyScoreItem.SCORE=l[0].SCORE,this.weeklyScoreItem.PERCENTAGE=l[0].PERCENTAGE,this.weeklyScoreItem.MINUTES_SPEND=l[0].MINUTES_SPEND,this.weeklyScoreItem.TIME_SCORE=l[0].TIME_SCORE),t.length>0&&(this.monthlyScoreItem.HP_ID=t[0].HP_ID,this.monthlyScoreItem.HABIT_ID=t[0].HABIT_ID,this.monthlyScoreItem.PERIODICITY=t[0].PERIODICITY,this.monthlyScoreItem.REF_DATE=t[0].REF_DATE,this.monthlyScoreItem.TARGET=t[0].TARGET,this.monthlyScoreItem.SCORE=t[0].SCORE,this.monthlyScoreItem.PERCENTAGE=t[0].PERCENTAGE,this.monthlyScoreItem.MINUTES_SPEND=t[0].MINUTES_SPEND,this.monthlyScoreItem.TIME_SCORE=t[0].TIME_SCORE),E.length>0&&(this.quaterlyScoreItem.HP_ID=E[0].HP_ID,this.quaterlyScoreItem.HABIT_ID=E[0].HABIT_ID,this.quaterlyScoreItem.PERIODICITY=E[0].PERIODICITY,this.quaterlyScoreItem.REF_DATE=E[0].REF_DATE,this.quaterlyScoreItem.TARGET=E[0].TARGET,this.quaterlyScoreItem.SCORE=E[0].SCORE,this.quaterlyScoreItem.PERCENTAGE=E[0].PERCENTAGE,this.quaterlyScoreItem.MINUTES_SPEND=E[0].MINUTES_SPEND,this.quaterlyScoreItem.TIME_SCORE=E[0].TIME_SCORE),o.length>0&&(this.yearlyScoreItem.HP_ID=o[0].HP_ID,this.yearlyScoreItem.HABIT_ID=o[0].HABIT_ID,this.yearlyScoreItem.PERIODICITY=o[0].PERIODICITY,this.yearlyScoreItem.REF_DATE=o[0].REF_DATE,this.yearlyScoreItem.TARGET=o[0].TARGET,this.yearlyScoreItem.SCORE=o[0].SCORE,this.yearlyScoreItem.PERCENTAGE=o[0].PERCENTAGE,this.yearlyScoreItem.MINUTES_SPEND=o[0].MINUTES_SPEND,this.yearlyScoreItem.TIME_SCORE=o[0].TIME_SCORE);for(let r=0;r<this.additionalPromptDetails.length;r++){let I=this.additionalPromptDetails[r];const O=await U(I.AP_ID,"Daily",this.forDate);O.length>0?I.dailyAPScore=O[0]:I.dailyAPScore={AP_ID:I.AP_ID,PERIODICITY:"Daily",REF_DATE:this.forDate,SCORE:0};const D=await U(I.AP_ID,"Weekly",this.endOfWeek);D.length>0?I.weeklyAPScore=D[0]:I.weeklyAPScore={AP_ID:I.AP_ID,PERIODICITY:"Weekly",REF_DATE:this.endOfWeek,SCORE:0};const S=await U(I.AP_ID,"Monthly",this.monthofDate);S.length>0?I.monthlyAPScore=S[0]:I.monthlyAPScore={AP_ID:I.AP_ID,PERIODICITY:"Monthly",REF_DATE:this.monthofDate,SCORE:0};const m=await U(I.AP_ID,"Quaterly",this.endOfQuater);m.length>0?I.quaterlyAPScore=m[0]:I.quaterlyAPScore={AP_ID:I.AP_ID,PERIODICITY:"Quaterly",REF_DATE:this.endOfQuater,SCORE:0};const u=await U(I.AP_ID,"Yearly",this.yearofDate);u.length>0?I.yearlyAPScore=u[0]:I.yearlyAPScore={AP_ID:I.AP_ID,PERIODICITY:"Yearly",REF_DATE:this.yearofDate,SCORE:0}}},async saveHabitScore(e){const l={HABIT_ID:e.HABIT_ID,PERIODICITY:e.PERIODICITY,REF_DATE:e.REF_DATE,TARGET:e.TARGET,SCORE:e.SCORE,PERCENTAGE:e.PERCENTAGE,MINUTES_SPEND:e.MINUTES_SPEND,TIME_SCORE:e.TIME_SCORE};e.HP_ID?(console.log("Update the Habit Score details"),l.HP_ID=e.HP_ID,await ae(Object.assign({},l))):(console.log("Add the New Habit Score details"),e.HP_ID=await le(Object.assign({},l)))},async saveAPScore(e){e.APP_ID?(console.log("Update the AP Score details"),e.APP_ID=await oe(Object.assign({},e))):(console.log("Add the New AP Score details"),e.APP_ID=await ne(Object.assign({},e)))},updateAllTypeHabitScore(e){this.dailyScoreItem.SCORE=this.dailyScoreItem.SCORE+e,this.weeklyScoreItem.SCORE=this.weeklyScoreItem.SCORE+e,this.monthlyScoreItem.SCORE=this.monthlyScoreItem.SCORE+e,this.quaterlyScoreItem.SCORE=this.quaterlyScoreItem.SCORE+e,this.yearlyScoreItem.SCORE=this.yearlyScoreItem.SCORE+e,this.saveHabitScore(this.dailyScoreItem),this.saveHabitScore(this.weeklyScoreItem),this.saveHabitScore(this.monthlyScoreItem),this.saveHabitScore(this.quaterlyScoreItem),this.saveHabitScore(this.yearlyScoreItem)},updateAllTypeAPScore(e,l){e.dailyAPScore.SCORE=e.dailyAPScore.SCORE+l,e.weeklyAPScore.SCORE=e.weeklyAPScore.SCORE+l,e.monthlyAPScore.SCORE=e.monthlyAPScore.SCORE+l,e.quaterlyAPScore.SCORE=e.quaterlyAPScore.SCORE+l,e.yearlyAPScore.SCORE=e.yearlyAPScore.SCORE+l,this.saveAPScore(e.dailyAPScore),this.saveAPScore(e.weeklyAPScore),this.saveAPScore(e.monthlyAPScore),this.saveAPScore(e.quaterlyAPScore),this.saveAPScore(e.yearlyAPScore)},saveOptions(){console.log(this.mainCheckEditedItem),this.mainCheckEditedItem.CONSTANT_VALUE=this.mainCheckEditedItem.OPTION_OBJECT.OPTION_VALUE,this.mainCheckEditedItem.NOTES=this.mainCheckEditedItem.NOTES+this.mainCheckEditedItem.OPTION_OBJECT.OPTION_DESC+`
`,this.saveConstantNum()},async saveConstantNum(){if(this.habitDetails.IS_ADDITIVE){const e=this.mainCheckEditedItem.CONSTANT_VALUE-this.mainCheckEditedItem.OLD_CONSTANT_VALUE;this.updateAllTypeHabitScore(e),this.mainCheckEditedItem.OLD_CONSTANT_VALUE=this.mainCheckEditedItem.CONSTANT_VALUE}this.saveCheckMarks()},cannotBeInFuture(e){let l=h(e);return h().diff(l,"minutes")<0?h().format("YYYY-MM-DDTHH:mm"):e},saveTimeEntry(){this.mainCheckEditedItem.TIME_ENTRY||(this.mainCheckEditedItem.TIME_ENTRY=h().format("YYYY-MM-DDTHH:mm")),this.mainCheckEditedItem.TIME_ENTRY=this.cannotBeInFuture(this.mainCheckEditedItem.TIME_ENTRY)},saveDurationEntry(){this.mainCheckEditedItem.FROM_TIME||(this.mainCheckEditedItem.FROM_TIME=h().format("YYYY-MM-DDTHH:mm")),this.mainCheckEditedItem.UPTO_TIME||(this.mainCheckEditedItem.UPTO_TIME=h().format("YYYY-MM-DDTHH:mm")),this.mainCheckEditedItem.FROM_TIME=this.cannotBeInFuture(this.mainCheckEditedItem.FROM_TIME);let e=h(this.mainCheckEditedItem.FROM_TIME),t=h(this.mainCheckEditedItem.UPTO_TIME).diff(e,"minutes"),E=h.duration(t,"minutes");console.log("duration : ",E),console.log("Duration in humanize form :",E.humanize()),this.mainCheckEditedItem.DURATION=t,t<0?(this.mainCheckEditedItem.UPTO_TIME=this.mainCheckEditedItem.FROM_TIME,this.saveDurationEntry()):this.saveCheckMarks()},async saveCheckMarks(){console.log("Saving Checkmarks");let e={HABIT_ID:this.mainCheckEditedItem.HABIT_ID,DATE:this.mainCheckEditedItem.DATE,OPTION_ID:this.mainCheckEditedItem.OPTION_ID,CONSTANT_VALUE:this.mainCheckEditedItem.CONSTANT_VALUE,TIME_ENTRY:this.habitDetails.IS_TIME_ENTRY?this.mainCheckEditedItem.TIME_ENTRY:"",NOTES:this.mainCheckEditedItem.NOTES,FROM_TIME:this.habitDetails.Is_DURATION_ENTRY?this.mainCheckEditedItem.FROM_TIME:"",UPTO_TIME:this.habitDetails.Is_DURATION_ENTRY?this.mainCheckEditedItem.UPTO_TIME:"",DURATION:this.habitDetails.Is_DURATION_ENTRY?this.mainCheckEditedItem.DURATION:0};this.CMT_ID?(e.CMT_ID=this.CMT_ID,await Ie(e)):(this.CMT_ID=await Ee(e),this.mainCheckEditedItem.CMT_ID=this.CMT_ID),console.log("Saving of CM finished")},async saveAPOption(e){var t;const l=(t=this.temp_ApOption_Obj)==null?void 0:t.OPTION_VALUE;console.log("optValue :",l),e.APAnswer.NUM_VALUE=l,e.APAnswer.HAS_NOTES&&(e.APAnswer.NOTES=e.APAnswer.NOTES+this.temp_ApOption_Obj.OPTION_DESC+`
`),await this.saveAPNum(e)},async saveAPNum(e){if(e.IS_NUM_ADDITIVE){const l=e.APAnswer.NUM_VALUE-e.APAnswer.OLD_NUM_VALUE;this.updateAllTypeAPScore(e,l),e.APAnswer.OLD_NUM_VALUE=e.APAnswer.NUM_VALUE,e.IS_ADDED_IN_MAIN&&this.updateAllTypeHabitScore(l),e.IS_SUBTRACTED_IN_MAIN&&this.updateAllTypeHabitScore(-l)}await this.saveAPAnswers(e)},async saveAPAnswers(e){var l,t;if(console.log("ap",e),this.CMT_ID){console.log("SInce CMT ID is present , so directly save the AP Answer data"),e.CMT_ID=this.CMT_ID;let E={AP_ID:e.AP_ID,CMT_ID:this.CMT_ID,OPTION_ID:(l=e.APAnswer)==null?void 0:l.OPTION_ID,NUM_VALUE:parseFloat((t=e.APAnswer)==null?void 0:t.NUM_VALUE),NOTES:e.APAnswer.NOTES};console.log("apDataToSave : ",E),e.APAnswer.APA_ID?(E.APA_ID=e.APAnswer.APA_ID,await re(Object.assign({},E))):e.APAnswer.APA_ID=await me(Object.assign({},E))}else console.log("Saving the CM first"),await this.saveCheckMarks(),console.log("Now again Save the Ap answer"),await this.saveAPAnswers(e)}}});const $e={class:"text-h6"},qe={key:0,class:"row q-col-gutter-sm q-py-sm justify-center q-pa-sm"},xe={key:0,class:"q-ma-sm"},Ge={key:1,class:"q-ma-sm"},Qe={key:0,class:"q-ma-sm"},Je={key:1,class:"q-ma-sm"},ze={key:2,class:""},We={key:3,class:""},ot={__name:"CheckMarkPage2",emits:["closeCM"],setup(e,{emit:l}){const t=Fe(),E=l,o=h().format("YYYY-MM-DDTHH:mm");ee(()=>{console.log("Component is mounted")});async function r(){E("closeCM"),t.resetCMStore()}async function I(){E("closeCM"),t.resetCMStore()}const O=te(()=>({height:u.screen.height-(m.value?100:200)+"px"})),D={right:"0px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px",opacity:.5},S={right:"-3px",borderRadius:"9px",backgroundColor:"#027be3",width:"9px",opacity:.2},m=G(!0),u=De();return u.platform.is.mobile?m.value=!0:m.value=!1,(f,a)=>(T(),g(Ae,{modelValue:s(t).addCMDailog,"onUpdate:modelValue":a[19]||(a[19]=i=>s(t).addCMDailog=i),persistent:"",maximized:m.value,"transition-show":"scale","transition-hide":"scale","backdrop-filter":"blur(4px)"},{default:d(()=>[n(Oe,{class:"",style:{width:"100%"}},{default:d(()=>[n(W,null,{default:d(()=>[A("div",$e,y(s(h)(s(t).forDate).format("dddd |  DD MMMM YYYY")),1),n(de),n(k,{dense:"",flat:"",icon:"minimize",onClick:a[0]||(a[0]=i=>m.value=!1),disable:!m.value},{default:d(()=>[m.value?(T(),g(w,{key:0,class:"bg-white text-primary"},{default:d(()=>[R("Minimize")]),_:1})):C("",!0)]),_:1},8,["disable"]),n(k,{dense:"",flat:"",icon:"crop_square",onClick:a[1]||(a[1]=i=>m.value=!0),disable:m.value},{default:d(()=>[m.value?C("",!0):(T(),g(w,{key:0,class:"bg-white text-primary"},{default:d(()=>[R("Maximize")]),_:1}))]),_:1},8,["disable"]),n(k,{dense:"",flat:"",icon:"close",onClick:a[2]||(a[2]=i=>I())},{default:d(()=>[n(w,{class:"bg-white text-primary"},{default:d(()=>[R("Close")]),_:1})]),_:1})]),_:1}),s(t).habitDetails.HABIT_ID?(T(),_("div",qe,[A("div",{class:ie(m.value?"col-12 col-md-8":"col-12 ")},[n(ce,{style:se(O.value),visible:!1,"thumb-style":D,"bar-style":S},{default:d(()=>[n(Te,{class:"q-ma-sm",style:{"border-radius":"8px"}},{default:d(()=>[n(B,{avatar:""},{default:d(()=>[n(he,{BGCOLOR:s(t).habitDetails.COLOR,EMOJI:s(t).habitDetails.EMOJI,SIZE:"lg",isRounded:!0},null,8,["BGCOLOR","EMOJI"])]),_:1}),n(B,null,{default:d(()=>[n(F,{lines:"1",class:"text-h5"},{default:d(()=>[R(y(s(t).habitDetails.HABIT_LABEL),1)]),_:1}),n(F,{class:"",lines:"3",style:{"white-space":"pre-line"}},{default:d(()=>[R(y(s(t).habitDetails.DESCRIPTION),1)]),_:1})]),_:1})]),_:1}),s(t).habitDetails.HAS_OPTION?(T(),_("div",xe,[n(L,{optionItem:s(t).optionDetails,questionLabel:s(t).habitDetails.QUESTION,optSelectedObj:s(t).mainCheckEditedItem.OPTION_OBJECT,"onUpdate:optSelectedObj":a[3]||(a[3]=i=>s(t).mainCheckEditedItem.OPTION_OBJECT=i),optSelectedId:s(t).mainCheckEditedItem.OPTION_ID,"onUpdate:optSelectedId":a[4]||(a[4]=i=>s(t).mainCheckEditedItem.OPTION_ID=i),"onUpdate:modelValue":a[5]||(a[5]=i=>s(t).saveOptions())},null,8,["optionItem","questionLabel","optSelectedObj","optSelectedId"])])):(T(),_("div",Ge,[n($,{modelValue:s(t).mainCheckEditedItem.CONSTANT_VALUE,"onUpdate:modelValue":[a[6]||(a[6]=i=>s(t).mainCheckEditedItem.CONSTANT_VALUE=i),a[7]||(a[7]=i=>s(t).saveConstantNum())],label:s(t).habitDetails.QUESTION},null,8,["modelValue","label"])])),n(M,{class:"q-ma-sm",filled:"",label:"Notes",type:"textarea",autogrow:"","input-style":"min-height: 100px;",modelValue:s(t).mainCheckEditedItem.NOTES,"onUpdate:modelValue":[a[8]||(a[8]=i=>s(t).mainCheckEditedItem.NOTES=i),a[9]||(a[9]=i=>s(t).saveCheckMarks())],debounce:"1000"},null,8,["modelValue"]),(T(!0),_(Q,null,J(s(t).additionalPromptDetails,(i,N)=>(T(),_("div",{key:N},[i.HAS_OPTION?(T(),_("div",Qe,[n(L,{optionItem:i.AP_OPTIONS,questionLabel:i.PROMPT_LABEL,optSelectedObj:s(t).temp_ApOption_Obj,"onUpdate:optSelectedObj":a[10]||(a[10]=c=>s(t).temp_ApOption_Obj=c),optSelectedId:i.APAnswer.OPTION_ID,"onUpdate:optSelectedId":c=>i.APAnswer.OPTION_ID=c,"onUpdate:modelValue":c=>s(t).saveAPOption(i)},null,8,["optionItem","questionLabel","optSelectedObj","optSelectedId","onUpdate:optSelectedId","onUpdate:modelValue"])])):C("",!0),!i.HAS_OPTION&&i.HAS_NUM?(T(),_("div",Je,[n($,{modelValue:i.APAnswer.NUM_VALUE,"onUpdate:modelValue":[c=>i.APAnswer.NUM_VALUE=c,c=>s(t).saveAPNum(i)],label:i.PROMPT_LABEL},null,8,["modelValue","onUpdate:modelValue","label"])])):C("",!0),i.HAS_NOTES?(T(),g(M,{key:2,class:"q-ma-sm custom-textarea",filled:"",label:i.HAS_NUM||i.HAS_OPTION?"Notes for "+i.PROMPT_LABEL:i.PROMPT_LABEL,type:"textarea",modelValue:i.APAnswer.NOTES,"onUpdate:modelValue":[c=>i.APAnswer.NOTES=c,c=>s(t).saveAPAnswers(i)],autogrow:"","input-style":"min-height: 100px;",debounce:"1000"},null,8,["label","modelValue","onUpdate:modelValue"])):C("",!0)]))),128)),s(t).habitDetails.Is_DURATION_ENTRY?(T(),_("div",ze,[n(M,{class:"q-ma-sm",filled:"",label:"Start Time",type:"datetime-local",modelValue:s(t).mainCheckEditedItem.FROM_TIME,"onUpdate:modelValue":[a[11]||(a[11]=i=>s(t).mainCheckEditedItem.FROM_TIME=i),a[12]||(a[12]=i=>s(t).saveDurationEntry())],max:s(o)},null,8,["modelValue","max"]),n(M,{class:"q-ma-sm",filled:"",label:"End Time",type:"datetime-local",modelValue:s(t).mainCheckEditedItem.UPTO_TIME,"onUpdate:modelValue":[a[13]||(a[13]=i=>s(t).mainCheckEditedItem.UPTO_TIME=i),a[14]||(a[14]=i=>s(t).saveDurationEntry())],max:s(o),min:s(t).mainCheckEditedItem.FROM_TIME},null,8,["modelValue","max","min"]),n(M,{class:"q-ma-sm",filled:"",label:"Duration (mins)",type:"number",modelValue:s(t).mainCheckEditedItem.DURATION,"onUpdate:modelValue":a[15]||(a[15]=i=>s(t).mainCheckEditedItem.DURATION=i),readonly:""},null,8,["modelValue"])])):C("",!0),s(t).habitDetails.IS_TIME_ENTRY?(T(),_("div",We,[n(M,{class:"q-ma-sm",filled:"",label:"Done at",type:"datetime-local",modelValue:s(t).mainCheckEditedItem.TIME_ENTRY,"onUpdate:modelValue":[a[16]||(a[16]=i=>s(t).mainCheckEditedItem.TIME_ENTRY=i),a[17]||(a[17]=i=>s(t).saveTimeEntry())],max:s(o)},null,8,["modelValue","max"])])):C("",!0)]),_:1},8,["style"])],2)])):C("",!0),n(_e),n(j,{align:"right"},{default:d(()=>[n(k,{label:"Ok",color:"primary",onClick:a[18]||(a[18]=i=>r())})]),_:1})]),_:1})]),_:1},8,["modelValue","maximized"]))}};export{lt as _,ot as a,Fe as u};
